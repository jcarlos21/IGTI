//IGTI - Custom javascript
//HTML escrito a partir deste JS, como "appends" de texto em elementos, devem conter códigos para letras acentuadas. Motivo: formatação UTF-8 inclusas após o carregamento da página, não é processada pelo Canvas. Problema desconhecido.

async function globalModalCanvasIGTI() {
   const id = '328932980';
   const email = 'leandro.tassara@igti.edu.br';

   function setLocalStorageGlobalModal(modalCampaignID, qnt) {
      localStorage.setItem(
         `@IGTI:GlobalModal2:${id}`,
         JSON.stringify({
            viewed: qnt,
            modalCampaignID: modalCampaignID,
         }),
      );
   }

   function getLocalStorageGlobalModal(modalCampaignID) {
      localStorageGlobalModal = JSON.parse(localStorage.getItem(`@IGTI:GlobalModal2:${id}`));
      if (localStorageGlobalModal) {
         return localStorageGlobalModal['viewed'];
      } else {
         return 0;
      }
   }

   async function showGlobalModalCanvasIGTI(qnt) {
      $('body').append(`
        <div id="fundoEscuroGlobalModal">
        </div>
        <div id="globalModalContainer" class="globalModalClass">
            <span id="closebtn" class="close">&times
            </span>
            <div id="back">
                <video autoplay muted controls id="idbanner" src="https://igtiimages.s3-sa-east-1.amazonaws.com/Disruptive+Revolution+-+Fundamentos+(WhatsApp).mp4" class="globalmodal-responsive"></video>
                <p>Quer continuar seus estudos? Faça sua pós-graduação com 60% de desconto. <a href="https://www.igti.com.br/solicitar-contrato-pos/">Inscreva-se aqui</a> e utilize o voucher <b>POS60AGORA</b> no checkout. Condição válida até 7/6.</p>
                <p>E para você que deseja dar continuidade ao seu bootcamp, <a href="https://www.igti.com.br/inscricao-bootcamp-gratuito-2/">clique aqui</a>.</p>
                <p id="last-p">Veja mais detalhes no vídeo.</p>
            </div>
        </div>
        <style>
            div#fundoEscuroGlobalModal { background-color: rgba(0, 0, 0, 0.3);
                width: 100%; 
                position: fixed; 
                height: 100vh; 
                z-index: 900; 
                top: 0; 
                right: 0; 
                left: 0; 
                bottom: 0; 
                display: none;
            }
            div#globalModalContainer { 
                z-index: 999; 
                position: fixed; 
                top: 50%; 
                left: 50%; 
                transform: translate(-50%, -50%); 
                width: 38%; 
                background-color: transparent;
            } 
            .globalmodal-responsive { width: 100%; height: auto;} 
            .close:hover, .close:focus {color: #000; text-decoration: none; cursor: pointer; z-index: 1000}
            #back { background-color: white; padding: 5px;}
            video { border: none; box-shadow: none;}
            p { text-align: center;
                font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";
                padding: 0; margin: 10px;
                font-size: 0.77rem
            }
            h1 {
                font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";
                font-size: 0.92rem;
                text-align: center;
            }
            #last-p {
                /*padding-bottom: 15px;*/
            }
        </style>`);
      $('#fundoEscuroGlobalModal').fadeIn('300');

      $('#fundoEscuroGlobalModal').click(() => {
         $('#fundoEscuroGlobalModal').fadeOut('300');
         $('#globalModalContainer').fadeOut('300');
         setLocalStorageGlobalModal('SCF20212', qnt);
      });

      $('#closebtn').click(() => {
         $('#fundoEscuroGlobalModal').fadeOut('300');
         $('#globalModalContainer').fadeOut('300');
         setLocalStorageGlobalModal('SCF20212', qnt);
      });

      // $('#idbanner').click(() => {
      //     $('#globalModalContainer').fadeOut('300');
      //     $('#fundoEscuroGlobalModal').fadeOut('300');
      //     setLocalStorageGlobalModal('SCF20212')
      // })
   }

   if (id && email) {
      const globalModalShowed = getLocalStorageGlobalModal('SCF20212');
      if (globalModalShowed < 3) {
         showGlobalModalCanvasIGTI(globalModalShowed + 1);
      }
   }
}
const id = ENV.current_user_id;
const email = ENV.USER_EMAIL;

/**Modal de promoção - Início*/
async function showModalPromo() {
   if (window.location.href.indexOf('/login/canvas') > 0 == false) {
      if (localStorage.getItem('promoModalOnLoad') != 1) {
         $('body').append(`
<div id="fundoEscuroGlobalModal"></div>
<div id="globalModalContainer" class="globalModalClass">
  
  <div id="back">
    <div class="text-trial-modal">
      <div id="link-modal-trial">
        <span id="closebtn" style="height: 25px;width:25px;" class="close">&times </span>
        <a
          id="expand-user-trial"
          target="_blank"
          href="https://checkout.igti.com.br/solicitar-contrato-pos/?=nome_completo_conforme_cpf=${ENV.current_user.display_name}&email=${ENV.USER_EMAIL}"
        >
          <img class="img-banner-promo" id="img-banner-promo"
            src="https://igtieadstorage.blob.core.windows.net/repositorio-imagens/cyber_week_popup_29-11.jpg"
            alt="PopUp Promocional"
          />
        </a>
      </div>
    </div>
  </div>
</div>
<style>

 

  div#fundoEscuroGlobalModal {
    background-color: rgba(0, 0, 0, 0.3);
    width: 100%;
    position: fixed;
    height: 100vh;
    z-index: 900;
    top: 0;
    right: 0;
    left: 0;
    bottom: 0;
    display: none;
    padding: 5px;
  }
  div#globalModalContainer {
    z-index: 999;
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 60%;
    background-color: transparent;
  }
  a {
    padding: 10px;
    cursor: pointer;
  }
  .globalmodal-responsive {
    width: 100%;
    height: auto;
  }
  .close {

    padding: 10px;
    background: rgba(255,255,255,0.7);
    top: 14px;
    
    position: fixed;
    left: 470px;
    float: none;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
  }
  .close:hover,
  .close:focus {
    color: #000;
    text-decoration: none;
    cursor: pointer;
    z-index: 1000;
  }
  #back {
    padding: 10px;
    border-radius: 5px;
    justify-content: center;
    align-items: center;
  }
  @media screen and(max-width: 800px) {
  #img-banner-promo{
      max-width: 300px;
  }
  .close{
      left:285px;
  }

  .text-trial-modal {
    text-align: center;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
      "Helvetica Neue", Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji",
      "Segoe UI Symbol", "Noto Color Emoji";
    padding: 0;
    margin: 10px;
    font-size: 0.77rem;
  }
  .title-trial-modal {
    color: rgb(0, 25, 84);
  }

  h1 {
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
      "Helvetica Neue", Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji",
      "Segoe UI Symbol", "Noto Color Emoji";
    font-size: 0.92rem;
    text-align: center;
  }</style
>`);
         $('#fundoEscuroGlobalModal').fadeIn('300');
         if ($(window).width() < 800) {
            $('#img-banner-promo').css('max-width', '300px');
            $('.close').css('left', '270px');
         } else {
            $('#img-banner-promo').css('max-width', '500px');
         }
         $('#fundoEscuroGlobalModal').fadeIn('300');
         $('#closebtn').click(() => {
            $('#fundoEscuroGlobalModal').fadeOut('300');
            $('#globalModalContainer').fadeOut('300');
         });
         localStorage.setItem('promoModalOnLoad', 1);
      }
   }
}

/**Modal de promoção - Fim*/

/**Função responsável por criar o modal de free trial ---- Início ----
 *
 * @param cpf - CPF retornado da função precedente
 * @param telefone - Telefone retornado da função precedente
 */
function showModalTrialPeriod(cpf, telefone) {
   $('body').append(`
  <div id="fundoEscuroGlobalModal"></div>
  <div id="globalModalContainer" class="globalModalClass">
    <span id="closebtn" class="close">&times </span>
    <div id="back"> 
      <h1 class="title-trial-modal">
        Seu período de experiência está acabando. Você gostaria de estende-lo?
      </h1>
      <hr />
      <div class="text-trial-modal">
        <div id="link-modal-trial">
          <a id="expand-user-trial" class="trial-link-option" onclick="expandUserTrialPeriod(${id});" >Estender por mais 15 dias</a>
          <a class="trial-link-option"
          target="_blank" href="https://checkout.igti.com.br/assine/?=nome_completo_conforme_cpf=${ENV.current_user.display_name}&email=${ENV.USER_EMAIL}&cpf=${cpf}&telefone=${telefone}"
            >Assinar agora</a
          >
          <div class="loader-div">
            <label
              class="loader-label"
              id="loading-label"
              for="link-modal-trial"
            ></label>
          </div>
        </div>
        
      </div>
      
    </div>
  </div>
  <style>
    div#fundoEscuroGlobalModal {
      background-color: rgba(0, 0, 0, 0.3);
      width: 100%;
      position: fixed;
      height: 100vh;
      z-index: 900;
      top: 0;
      right: 0;
      left: 0;
      bottom: 0;
      display: none;
      padding: 5px;
    }
    div#globalModalContainer {
      z-index: 999;
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 60%;
      background-color: transparent;
    }
    a{
      padding: 10px;
      cursor:pointer;
    }
    .globalmodal-responsive {
      width: 100%;
      height: auto;
    }
    .close {
      padding: 5px;
    }
    .close:hover,
    .close:focus {
      color: #000;
      text-decoration: none;
      cursor: pointer;
      z-index: 1000;
    }
    #back {
      background-color: white;
      padding: 10px;
      border-radius: 5px;
      justify-content: center;
      align-items: center;
    }
    #link-modal-trial
    {
      display: flex;
      justify-content: space-around;
      font-size:0.8rem;
      font-weight:600;
      
    }
  
    .loader-div {
     
      display: none;
      justify-content: flex-end;
    }
  
    .loader-label {
      border: 4px solid #f3f3f3; /* Light grey */
      border-top: 4px solid rgb(0, 25, 84); /* Blue */
      border-radius: 50%;
      width: 25px;
      height: 25px;
      animation: spin 2s linear infinite;
      position: relative;
      margin: 12px 9px 0px 0px;
    }
    @keyframes spin {
      0% {
        transform: rotate(0deg);
      }
      100% {
        transform: rotate(360deg);
      }
    }
  
    img {
      max-width: 100px;
    }
  
    .text-trial-modal {
      text-align: center;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
        "Helvetica Neue", Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji",
        "Segoe UI Symbol", "Noto Color Emoji";
      padding: 0;
      margin: 10px;
      font-size: 0.77rem;
    }
    .title-trial-modal {
      color: rgb(0, 25, 84);
    }
  
    h1 {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
        "Helvetica Neue", Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji",
        "Segoe UI Symbol", "Noto Color Emoji";
      font-size: 0.92rem;
      text-align: center;
    }</style
  >`);
   $('#fundoEscuroGlobalModal').fadeIn('300');

   $('#closebtn').click(() => {
      $('#fundoEscuroGlobalModal').fadeOut('300');
      $('#globalModalContainer').fadeOut('300');
   });
   $('#expand-user-trial').click(expandUserTrialPeriod(id));
}
/** Função responsável por criar o modal de free trial ---- Fim ---- */

/**
 *
 * Função responsável por mostrar modal de carregamento linkando ao de sucesso
 *  ---- Início ----
 */
function showModalLoading() {
   $('body').append(`
<div id="fundoEscuroGlobalModal"></div>
<div id="globalModalContainer" class="globalModalClass">
  <span id="closebtn" class="close">&times </span>
  <div id="back"> 
    <h1 class="title-trial-modal">
    Carregando
    </h1>
    <hr />
    <div class="text-trial-modal">
      <div id="link-modal-trial">
        <a id="expand-user-trial" class="trial-link-option" onclick="" ></a>
        <a class="trial-link-option"
        target="_blank" href=""
          ></a
        >
        <div class="loader-div">
          <label
            class="loader-label"
            id="loading-label"
            for="link-modal-trial"
          ></label>
        </div>
      </div>
      
    </div>
    
  </div>
</div>
<style>
  div#fundoEscuroGlobalModal {
    background-color: rgba(0, 0, 0, 0.3);
    width: 100%;
    position: fixed;
    height: 100vh;
    z-index: 900;
    top: 0;
    right: 0;
    left: 0;
    bottom: 0;
    display: none;
    padding: 5px;
  }
  div#globalModalContainer {
    z-index: 999;
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 60%;
    background-color: transparent;
  }
  a{
    padding: 10px;
    cursor:pointer;
  }
  .globalmodal-responsive {
    width: 100%;
    height: auto;
  }
  .close {
    padding: 5px;
  }
  .close:hover,
  .close:focus {
    color: #000;
    text-decoration: none;
    cursor: pointer;
    z-index: 1000;
  }
  #back {
    background-color: white;
    padding: 10px;
    border-radius: 5px;
    justify-content: center;
    align-items: center;
  }
  #link-modal-trial
  {
    display: flex;
    justify-content: space-around;
    font-size:0.8rem;
    font-weight:600;
    
  }

  .loader-div {
   
    display: none;
    justify-content: flex-end;
  }

  .loader-label {
    border: 4px solid #f3f3f3; /* Light grey */
    border-top: 4px solid rgb(0, 25, 84); /* Blue */
    border-radius: 50%;
    width: 25px;
    height: 25px;
    animation: spin 2s linear infinite;
    position: relative;
    margin: 12px 9px 0px 0px;
  }
  @keyframes spin {
    0% {
      transform: rotate(0deg);
    }
    100% {
      transform: rotate(360deg);
    }
  }

  img {
    max-width: 100px;
  }

  .text-trial-modal {
    text-align: center;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
      "Helvetica Neue", Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji",
      "Segoe UI Symbol", "Noto Color Emoji";
    padding: 0;
    margin: 10px;
    font-size: 0.77rem;
  }
  .title-trial-modal {
    color: rgb(0, 25, 84);
  }

  h1 {
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
      "Helvetica Neue", Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji",
      "Segoe UI Symbol", "Noto Color Emoji";
    font-size: 0.92rem;
    text-align: center;
  }</style
>`);
   $('#fundoEscuroGlobalModal').fadeIn('300');
   $('#closebtn').click(() => {
      $('#fundoEscuroGlobalModal').fadeOut('300');
      $('#globalModalContainer').fadeOut('300');
   });
}
/**
 * Função responsável por mostrar modal de carregamento ---- Fim ----
 */

/**Função responsável por expandir o tempo de free trial do usuário, caso não tenha nenhuma
 * movimentação no canvas
 *
 * @param id - ID do canvas do usuário
 * ----Início----
 */
function expandUserTrialPeriod(id) {
   $('.trial-link-option').css('display', 'none');
   $('.loader-div').css('display', 'block');
   $('.title-trial-modal').text('Carregando');
   var xhr = new XMLHttpRequest();
   // if (event == 'comEvento') {
   //    // var url = `https://tuliovieira.pythonanywhere.com/trial_evento`; Comentado dia 07/03/22
   //    var url = `https://igti-webservices-prod.azurewebsites.net/atualizacao_time_trial`;
   // }

   var url = `https://igti-webservices-prod.azurewebsites.net/atualizacao_time_trial`;

   xhr.open('POST', url, true);
   xhr.setRequestHeader('Content-Type', 'application/json');
   xhr.onreadystatechange = function () {
      if (xhr.status === 200 && xhr.readyState === 4) {
         const resResult = xhr.responseText;
         const resParsed = JSON.parse(resResult);
         if (
            resParsed.status == 'sucesso' &&
            !ENV.current_user_roles.includes('teacher') === true
         ) {
            $('.title-trial-modal').text(`Sucesso! Seu período de teste foi estendido.`);
            $('.title-trial-modal').append(
               `<a class="success-trial-modal"><br>Clique aqui para continuar</a>`,
            );
            $('.success-trial-modal').click(() => {
               $('#fundoEscuroGlobalModal').fadeOut('300');
               $('#globalModalContainer').fadeOut('300');
            });
            $('hr').remove();
            $('.loader-div').css('display', 'none');
         }

         // if (
         //    resParsed.status == 'sucesso' &&
         //    event == 'comEvento' &&
         //    !ENV.current_user_roles.includes('teacher') === true
         // ) {
         //    $('.title-trial-modal').text(`Sucesso! aproveite seu período de teste.`);
         //    $('.title-trial-modal').append(
         //       `<a class="success-trial-modal"><br>Clique aqui para continuar</a>`,
         //    );
         //    $('.success-trial-modal').click(() => {
         //       $('#fundoEscuroGlobalModal').fadeOut('300');
         //       $('#globalModalContainer').fadeOut('300');
         //    });
         //    $('hr').remove();
         //    $('.loader-div').css('display', 'none');
         // }

         if (
            resParsed.status == 'erro' &&
            resParsed.message == 'usuario ja solicitou extensao de prazo' &&
            !ENV.current_user_roles.includes('teacher') === true
         ) {
            $('.title-trial-modal').text(`Você já solicitou a extensão do prazo de assinatura.`);
            $('.title-trial-modal').append(
               `<a class="success-trial-modal"><br>Clique aqui para continuar ou <a class="trial-link-option"
          target="_blank" href="https://checkout.igti.com.br/assine/?=nome_completo_conforme_cpf=${ENV.current_user.display_name}&email=${ENV.USER_EMAIL}&cpf=${cpf}&telefone=${telefone}"
            >Assine agora</a </a>`,
            );
            $('.success-trial-modal').click(() => {
               $('#fundoEscuroGlobalModal').fadeOut('300');
               $('#globalModalContainer').fadeOut('300');
            });
            $('hr').remove();
            $('.loader-div').css('display', 'none');
         }
         if (resParsed.status == 'erro') {
            $('.title-trial-modal').text(
               `Encontramos um erro, por favor tente solicitar novamente mais tarde.`,
            );
            $('.title-trial-modal').append(
               `<a class="success-trial-modal"><br>Clique aqui para continuar</a>`,
            );
            $('hr').remove();
            $('.loader-div').css('display', 'none');
            $('.success-trial-modal').click(() => {
               $('#fundoEscuroGlobalModal').fadeOut('300');
               $('#globalModalContainer').fadeOut('300');
            });
            $('#closebtn').click(() => {
               $('#fundoEscuroGlobalModal').fadeOut('300');
               $('#globalModalContainer').fadeOut('300');
            });
         }
      } else {
         if (!ENV.current_user_roles.includes('teacher') === true) {
            $('.title-trial-modal').text(
               `Encontramos um erro, por favor tente solicitar novamente mais tarde.`,
            );
            $('.title-trial-modal').append(
               `<a class="success-trial-modal"><br>Clique aqui para continuar</a>`,
            );
            $('hr').remove();
            $('.loader-div').css('display', 'none');
            $('.success-trial-modal').click(() => {
               $('#fundoEscuroGlobalModal').fadeOut('300');
               $('#globalModalContainer').fadeOut('300');
            });
            $('#closebtn').click(() => {
               $('#fundoEscuroGlobalModal').fadeOut('300');
               $('#globalModalContainer').fadeOut('300');
            });
         }
      }
   };
   var data = JSON.stringify({
      id_canvas: id,
   });
   xhr.send(data);
}
/**
 * Função responsável por expandir o tempo de free trial do usuário ---- Fim ----
 */

/**Função responsável por checar se usuário é trial ou não
 * também mostra a quantidade de dias faltantes para o usuário
 * e adiciona link para assinatura caso usuário esteja perto de
 * vencer o prazo de assinatura e ele não demonstre nenhuma atividade
 * estende o prazo por mais um período.
 * @param id - ID do canvas do usuário
 * ---- Início ----
 */
function getUserTrial(id) {
   var xhr = new XMLHttpRequest();
   var url = `https://tuliovieira.pythonanywhere.com/verifica_periodo_trial?id_canvas=${id}`;
   xhr.open('GET', url, true);
   xhr.setRequestHeader('Content-Type', 'application/json');
   xhr.onreadystatechange = function () {
      if (xhr.status === 200 && xhr.readyState === 4) {
         const resData = xhr.responseText;
         const userData = JSON.parse(resData);

         if (
            userData.e_assinante_trial == 1 &&
            userData.dias_para_fim > 0 &&
            !ENV.current_user_roles.includes('teacher') === true
         ) {
            /**Inicio da função que adiciona o banner assine agora para quem está no período de free trial*/
            $('body').css('padding-top', '40px');
            $('header').css('top', '40px');
            /**Caso esteja na tela de mensagens, não se aplica o padding */
            if (window.location.href.indexOf('conversations#filter=type=inbox') < 0) {
               $('header').css('height', 'calc(100% - 40px)');
            }
            $('.fQfxa_bGBk').css('z-index', '1001');
            $('body').append(`.<div style=" position: fixed;
            top: 0px;
          margin-left:0px;
            background-color: rgb(53,63,64);
            width: 100%;
            height: 40px;
            text-align:center;
          display:flex;
          align-items:center;
              justify-content:center;
            border-bottom: 2px solid rgb(48,201,252);
            z-index: 10000;
            opacity: 0.79;" id='banner'><span style="color:white;font-size:0.8rem;font-weight:bold;">${userData.dias_para_fim} dias restantes. <mark style="background-color:rgb(53,63,64);color:rgb(255,179,0);font-weight:bold;text-decoration:"><a style="text-decoration:none; color:rgb(255,179,0); !important;font-size:0.8rem;" target="_blank" href="https://checkout.igti.com.br/assine/?=nome_completo_conforme_cpf=${ENV.current_user.display_name}&email=${ENV.USER_EMAIL}&cpf=${userData.cpf}&telefone=${userData.telefone}"> <u>Assine agora!</u></a></mark></span></div>`);
         }
         /**
          * Condicional pra quando acaba o período de teste do usuário
          */
         if (
            userData.e_assinante_trial == 1 &&
            userData.dias_para_fim <= 0 &&
            !ENV.current_user_roles.includes('teacher') === true
         ) {
            $('body').css('padding-top', '40px');
            $('header').css('top', '40px');
            $('header').css('height', 'calc(100% - 40px)');
            $('.fQfxa_bGBk').css('z-index', '1001');
            $('body').append(`.<div style=" position: fixed;
          top: 0px;
        margin-left:0px;
          background-color: rgb(53,63,64);
          width: 100%;
          height: 40px;
          text-align:center;
        display:flex;
        align-items:center;
            justify-content:center;
          border-bottom: 2px solid rgb(48,201,252);
          z-index: 10000;
          opacity: 0.79;" id='banner'><span style="color:white;font-size:0.8rem;font-weight:bold;">Seu período de teste acabou :( <mark style="background-color:rgb(53,63,64);color:rgb(255,179,0);font-weight:bold;text-decoration:"><a style="text-decoration:none; padding-left:5px;color:rgb(255,179,0); !important;font-size:0.8rem;" target="_blank" href="https://checkout.igti.com.br/assine/?=nome_completo_conforme_cpf=${ENV.current_user.display_name}&email=${ENV.USER_EMAIL}&cpf=${userData.cpf}&telefone=${userData.telefone}"> <u>Assine agora!</u></a></mark></span></div>`);
         }
         /**
          * Condicional para estender o período por mais 15 dias caso o usuário não tiver alguma movimentação no canvas
          *
          */
         if (
            userData.e_assinante_trial == 2 &&
            !ENV.current_user_roles.includes('teacher') === true
         ) {
            $('body').css('padding-top', '40px');
            $('header').css('top', '40px');
            $('header').css('height', 'calc(100% - 40px)');
            $('.fQfxa_bGBk').css('z-index', '1001');
            $('body').append(`.<div style=" position: fixed;
          top: 0px;
          margin-left:0px;
          background-color: rgb(53,63,64);
          width: 100%;
          height: 40px;
          text-align:center;
          display:flex;
          align-items:center;
          justify-content:center;
          border-bottom: 2px solid rgb(48,201,252);
          z-index: 10000;
          opacity: 0.79;" id='banner'><span style="color:white;font-size:0.8rem;font-weight:bold;">Aproveite mais 15 dias do período gratuito. <mark style="background-color:rgb(53,63,64);color:rgb(255,179,0);font-weight:bold;text-decoration:"><a class="next-phase" id="next-phase" style="text-decoration:none; color:rgb(255,179,0); !important;font-size:0.8rem;" onclick=";"> <u>Clique aqui!</u></a></mark></span></div>`);
            $('#next-phase').click(() => {
               showModalTrialPeriod(userData.cpf, userData.telefone);
            });
         }

         /**Comentado dia 07/03/22 - Matheus Augusto */
         //    if (
         //       userData.e_assinante_trial == 3 &&
         //       !ENV.current_user_roles.includes('teacher') === true
         //    ) {
         //       $('body').css('padding-top', '40px');
         //       $('header').css('top', '40px');
         //       $('header').css('height', 'calc(100% - 40px)');
         //       $('.fQfxa_bGBk').css('z-index', '1001');
         //       $('body').append(`.<div style=" position: fixed;
         //     top: 0px;
         //   margin-left:0px;
         //     background-color: #D69600;
         //     width: 100%;
         //     height: 40px;
         //     text-align:center;
         //   display:flex;
         //   align-items:center;
         //       justify-content:center;
         //     border-bottom: 2px solid #001954;
         //     z-index: 10000;
         //     opacity: 0.79;" id='banner'><span style="color:white;font-size:0.8rem;font-weight:bold;">Para você que está no ${userData.nome_evento}, solicite um período maior para testar a assinatura IGTI! <mark style="background-color:#D69600;color:#001954;font-weight:bold;text-decoration:"><a style="text-decoration:none;color:#001954; !important;font-size:0.8rem;"> <u id="next-phase-event">Clicando aqui!</u></a></mark></span></div>`);
         //       $('#next-phase-event').click(() => {
         //          showModalLoading();
         //          setTimeout(expandUserTrialPeriod(id, 'comEvento'), 500);
         //       });
         //    }
      }
   };
   var data = JSON.stringify({
      id_canvas: id,
   });

   xhr.send(data);
}
/**
 * Função responsável por checar se usuário é trial ou não ---- Fim ----
 */

async function pesquisaNPS() {
   function postVotedNps(id, email, note) {
      var xhr = new XMLHttpRequest();
      var url = 'https://nps.igti.com.br/igti/nps/';
      xhr.open('POST', url, true);
      xhr.setRequestHeader('Content-Type', 'application/json');
      xhr.onreadystatechange = function () {
         if (xhr.readyState === 4 && xhr.status === 200) {
            localStorage.setItem(
               `@IGTI:CanvasNPS:${id}`,
               JSON.stringify({
                  voted: true,
               }),
            );
            //        console.log(`POST e alteração no storage realizado! @IGTI:CanvasNPS:${id} para TRUE`);
         }
      };
      var data = JSON.stringify({
         id,
         email,
         note,
      });

      xhr.send(data);
   }

   if (id && email) {
      //console.log(`Variaveis id e email encontradas: ${id} - ${email}`)
      const userVotedStorageCache = JSON.parse(localStorage.getItem(`@IGTI:CanvasNPS:${id}`));

      if (!userVotedStorageCache) {
         //console.log(`Pesquisa no cache por @IGTI:CanvasNPS:${id}: não existe`)
         const { voted } = await $.get(`https://nps.igti.com.br/igti/nps/${id}`);

         if (voted) {
            localStorage.setItem(
               `@IGTI:CanvasNPS:${id}`,
               JSON.stringify({
                  voted: true,
               }),
            );
            //console.log(`Realizado busca de votação no banco de dados: ${voted}`)
            //console.log(`Setado valor no storage: @IGTI:CanvasNPS:${id} como ${voted}`)
            return;
         }

         exibirModalDePesquisa();
      } else if (!userVotedStorageCache.voted) {
         postVotedNps(id, email, userVotedStorageCache.note);
         //console.log('User no storage com valor de FALSE, reenviando requisição POST');
      } else {
         return 'Aluno já votou e localizado no storage';
      }
   }

   async function exibirModalDePesquisa() {
      console.log('Exibindo modal de pesquisa');
      $('body').append(
         '<div id="fundoEscuro"></div><div id="npsContainer" class="animated flipInX"> <p> Em uma escala de 0 a 10, quanto você recomendaria o IGTI a um amigo ou colega? </p> <div id=npsNotesList> <span></span> <div> <button class="submitNoteNPS">0</button> <button class="submitNoteNPS">1</button> <button class="submitNoteNPS">2</button> <button class="submitNoteNPS">3</button> <button class="submitNoteNPS">4</button> <button class="submitNoteNPS">5</button> <button class="submitNoteNPS">6</button> <button class="submitNoteNPS">7</button> <button class="submitNoteNPS">8</button> <button class="submitNoteNPS">9</button> <button class="submitNoteNPS">10</button> </div> <span></span> </div></div><style> @import url("https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,400;1,300&display=swap"); div#fundoEscuro { background-color: rgba(0, 0, 0, 0.3); width: 100%; position: fixed; height: 100vh; z-index: 900; top: 0; right: 0; left: 0; bottom: 0; display: none; } div#npsContainer { display: none; z-index: 999; position: fixed; top: 0; width: 100%; background-color: white; padding-bottom: 20px; box-shadow: 0 3px 6px rgba(0, 0, 0, 0.1), 0 3px 6px rgba(0, 0, 0, 0.13); } div#npsContainer p { text-align: center; font-family: "Roboto", sans-serif; font-weight: 200; color: rgba(0, 0, 0, 0.8); font-size: 18px; margin-bottom: 10px; } div#npsNotesList { display: flex; justify-content: center; align-items: center; font-family: "Roboto", sans-serif; font-style: italic; color: rgba(0, 0, 0, 0.6); } div#npsNotesList div { margin: 0 10px; } div#npsNotesList div button { width: 50px; height: 50px; border-radius: 50%; outline: none; border: 0.5px solid rgba(0, 0, 0, 0.2); color: rgba(0, 0, 0, 0.5); font-size: 15px; background: transparent; cursor: pointer; transition: 0.2s; } div#npsNotesList div button:hover { color: white; font-weight: 800; background: rgb(0, 175, 162); border: 0.5px solid transparent; }</style>',
      );
      $('#fundoEscuro').fadeIn('300');
      $('#npsContainer').removeClass('flipOutX').show();

      $('#fundoEscuro').click(() => {
         $('#npsContainer').addClass('flipOutX');
         $('#fundoEscuro').fadeOut('300');
      });

      $('.submitNoteNPS').on('click', (e) => {
         const note = e.target.textContent;

         localStorage.setItem(
            `@IGTI:CanvasNPS:${id}`,
            JSON.stringify({
               voted: false,
               note,
            }),
         );

         postVotedNps(id, email, note);

         $('#npsContainer').html('<p style="margin-top: 30px">Obrigado pelo seu feedback!</p>');

         setTimeout(() => {
            $('#npsContainer').addClass('flipOutX');
            $('#fundoEscuro').fadeOut('300');
         }, 1000);
      });
   }
}

$(document).ready(function () {
   $('#application').fadeIn(200);

   //CURSOS
   const bootcamps = [
      '2944',
      '2945',
      '2946',
      '2939',
      '2940',
      '2941',
      '2942',
      '2934',
      '2935',
      '2936',
      '2937',
      '2932',
      '2933',
      '2938',
   ];
   const parceiros = ['2950', '2977', '2978'];
   const sectionFree20212 = [
      '3391',
      '3395',
      '3397',
      '3399',
      '3402',
      '3405',
      '3406',
      '3407',
      '3408',
      '3409',
      '3410',
      '3411',
      '3412',
      '3413',
      '3414',
      '3415',
      '3416',
      '3417',
      '3418',
      '3404',
      '3403',
      '3401',
      '3400',
      '3398',
      '3396',
      '3394',
      '3411',
      '3392',
      '3390',
      '3389',
   ];

   //Variáveis globais
   const isLoginScreen = window.location.href.indexOf('/login/canvas');
   const isCourse = window.location.href.indexOf('/courses/');
   const url = window.location.href;

   //Chamadas

   actions();

   if (isLoginScreen == -1) {
      renderizarModais();
      // globalModalCanvasIGTI()
      for (let iSf = 0; iSf < sectionFree20212.length; iSf++) {
         if (window.location.href.indexOf(`/courses/${sectionFree20212[iSf]}`) > 0) {
            globalModalCanvasIGTI();
            break;
         }
      }
   } else {
      customizarLoginMobile();
   }

   if (
      url == 'https://online.igti.com.br/?login_success=1' ||
      url == 'https://online.igti.com.br/'
   ) {
      impossibilitarAlunoDeRejeitarDisciplina();
   }

   if (url.indexOf('change_password') > 0) {
      aplicarDesignTelaRecuperacaoDeSenha();
   }

   if (isCourse > 0) {
      modificarElementosCurso();
      addBarraProgresso();
   }

   //Funções
   if (ENV.current_user.display_name) {
      if (
         !ENV.USER_EMAIL &&
         localStorage.getItem(`@MailIGTIUser${ENV.current_user.display_name}`)
      ) {
         ENV.USER_EMAIL = localStorage.getItem(`@MailIGTIUser${ENV.current_user.display_name}`);
      } else if (ENV.USER_EMAIL) {
         localStorage.setItem(`@MailIGTIUser${ENV.current_user.display_name}`, ENV.USER_EMAIL);
      }

      //Removendo click do link na aba ajuda
      $('#global_nav_help_link').click(() => {
         setTimeout(() => {
            const item = findItem('a', 'Nova central de ajuda.');
            if (item) {
               item.href = '#';
               item.target = '';
            }
         }, 1000);
      });

      if (ENV.USER_EMAIL) {
         //carregando help center intercom
         console.log(`Carregando Widget de ajuda com email: ${ENV.USER_EMAIL}`);
         window.intercomSettings = {
            app_id: `zq3uaf8y`, //ID
            name: `${ENV.current_user.display_name}`, // Full name
            email: `${ENV.USER_EMAIL}`, // Email address
            custom_launcher_selector: '#global_nav_help_link',
         };

         // We pre-filled your app ID in the widget URL: 'https://widget.intercom.io/widget/zq3uaf8y'
         (function () {
            var w = window;
            var ic = w.Intercom;
            if (typeof ic === 'function') {
               ic('reattach_activator');
               ic('update', w.intercomSettings);
            } else {
               var d = document;
               var i = function () {
                  i.c(arguments);
               };
               i.q = [];
               i.c = function (args) {
                  i.q.push(args);
               };
               w.Intercom = i;
               var l = function () {
                  var s = d.createElement('script');
                  s.type = 'text/javascript';
                  s.async = true;
                  s.src = 'https://widget.intercom.io/widget/zq3uaf8y';
                  var x = d.getElementsByTagName('script')[0];
                  x.parentNode.insertBefore(s, x);
               };
               if (w.attachEvent) {
                  w.attachEvent('onload', l);
               } else {
                  w.addEventListener('load', l, false);
               }
            }
         })();

         (function (g, u, i, d, e, s) {
            g[e] = g[e] || [];
            var f = u.getElementsByTagName(i)[0];
            var k = u.createElement(i);
            k.async = true;
            k.src = 'https://static.userguiding.com/media/user-guiding-' + s + '-embedded.js';
            f.parentNode.insertBefore(k, f);
            if (g[d]) return;
            var ug = (g[d] = { q: [] });
            ug.c = function (n) {
               return function () {
                  ug.q.push([n, arguments]);
               };
            };
            var m = [
               'previewGuide',
               'finishPreview',
               'track',
               'identify',
               'triggerNps',
               'hideChecklist',
               'launchChecklist',
            ];
            for (var j = 0; j < m.length; j += 1) {
               ug[m[j]] = ug.c(m[j]);
            }
         })(window, document, 'script', 'userGuiding', 'userGuidingLayer', '152368254ID');

         if ((url === 'https://online.igti.com.br/') === true) {
            window.userGuiding.identify(`id_canvas=${ENV.current_user_id}`, {
               id_canvas: ENV.current_user_id,
               nome: ENV.current_user.display_name,
               email: ENV.USER_EMAIL,
            });
         }
      }
   }

   function actions() {
      //Carregando biblioteca de animação Animate.css
      $('head').append(
         $('<link rel="stylesheet" type="text/css" />').attr(
            'href',
            'https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.0.0/animate.min.css',
         ),
      );
      //removendo link no formulário de login "LMS de Fonte Aberta"
      $('.ic-Login-footer__links').hide();
      $('.ic-Login-header__links').hide();

      if (url.indexOf('grades') > 0) $('#only_consider_graded_assignments').click();

      adicionarVagas();
      if (isLoginScreen == -1) {
         if (
            !ENV.current_user_roles.includes('teacher') === true &&
            url.indexOf('theme_editor') < 0
         ) {
            getUserTrial(id);
         }
      }
      // showModalPromo();
   }

   function adicionarVagas() {
      $('#menu').append(`
      <li class="menu-item ic-app-header__menu-list-item ">
            <a href="#vagas" id="vagasLink" class="ic-app-header__menu-list-link">
              <div class="menu-item-icon-container" aria-hidden="true">
              <svg enable-background="new 0 0 24 24" width="26" height="26" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path fill="#fff" d="m15 6.5c-.552 0-1-.448-1-1v-1.5h-4v1.5c0 .552-.448 1-1 1s-1-.448-1-1v-1.5c0-1.103.897-2 2-2h4c1.103 0 2 .897 2 2v1.5c0 .552-.448 1-1 1z"/><path fill="#fff" d="m12.71 15.38c-.18.07-.44.12-.71.12s-.53-.05-.77-.14l-11.23-3.74v7.63c0 1.52 1.23 2.75 2.75 2.75h18.5c1.52 0 2.75-1.23 2.75-2.75v-7.63z"/><path fill="#fff" d="m24 7.75v2.29l-11.76 3.92c-.08.03-.16.04-.24.04s-.16-.01-.24-.04l-11.76-3.92v-2.29c0-1.52 1.23-2.75 2.75-2.75h18.5c1.52 0 2.75 1.23 2.75 2.75z"/></svg>
              </div>
              <div class="menu-item__text">
                Vagas
              </div>
            </a>
          </li>
          `);

      $('#vagasLink').click(() => {
         $('#main').html(
            `<script type="text/javascript">location.href="https://online.igti.com.br/users/` +
               ENV.current_user_id +
               `/external_tools/155";</script>`,
         );

         setTimeout(() => {
            rec_embed_js.load({
               widget_id: 'rec_job_listing_div',
               page_name: 'Vagas-IGTI',
               source: 'CareerSite',
               site: 'https://igti.zohorecruit.com',
               empty_job_msg: 'No current Openings',
            });
         }, 1000);
      });
   }

   function renderizarModais() {
      // Modal de aviso
      var modal_estilos =
         'display: block; max-width: 900px; padding: 25px; background: #fff; border-radius: 5px; -webkit-box-shadow: 0px 6px 14px -2px rgba(0,0,0,0.75); -moz-box-shadow: 0px 6px 14px -2px rgba(0,0,0,0.75); box-shadow: 0px 6px 14px -2px rgba(0,0,0,0.75); position: fixed; top: 50%; left: 50%; transform: translate(-50%,-50%); z-index: 99999999; overflow: visible;';
      var fundo_modal_estilos =
         'top: 0; right: 0; bottom: 0; left: 0; position: fixed; background-color: rgba(0, 0, 0, 0.6); z-index: 99999999; display: none;';

      //Ao passar o mes para dataExpiracao, subtrair 1.

      const modals = [];

      if (modals.length > 0) {
         var UmModalPorChamada = false;

         modals.forEach((modal) => {
            if (new Date() < modal.dataExpiracao && UmModalPorChamada == false) {
               if (modal.chamada()) UmModalPorChamada = true;
            }
         });
      }

      $('.fundo_modal, .close').click(function () {
         $('.fundo_modal').fadeOut(100);
      });
      $('.modalStop').click(function (e) {
         e.stopPropagation();
      });
   }

   function getTipoDeCurso() {
      //Caso o usuário esteja na página de inicio.
      var tipo;

      parceiros &&
         parceiros.forEach((curso) => {
            if (url.indexOf(curso) > 0) {
               tipo = 'parceiros';
            } else if (ENV.STUDENT_PLANNER_COURSES) {
               ENV.STUDENT_PLANNER_COURSES.forEach((cursoEnv) => {
                  if (cursoEnv.id == curso) tipo = 'parceiros';
               });
            }
         });

      if (!tipo) {
         var title = document.getElementsByTagName('title')[0];

         if (ENV.STUDENT_PLANNER_COURSES) {
            ENV.STUDENT_PLANNER_COURSES.forEach((cursoEnv) => {
               if (
                  cursoEnv.originalName.indexOf('Bootcamp') >= 0 ||
                  cursoEnv.originalName.indexOf('bootcamp') >= 0
               )
                  tipo = 'bootcamp';
            });
         }

         if (
            (title && title.innerText.indexOf('Bootcamp') >= 0) ||
            title.innerText.indexOf('bootcamp') >= 0
         ) {
            tipo = 'bootcamp';
         }
      }

      if (!tipo) tipo = 'pos';

      return tipo; //parceiros | bootcamp | pos
   }

   function findItem(type, text) {
      element = Array.from(document.querySelectorAll(type)).find((el) => el.textContent === text);
      return element;
   }

   function impossibilitarAlunoDeRejeitarDisciplina() {
      var btn = $('button[name="reject"]');
      btn.on('click', function () {
         var texto_aviso_rejeitar =
            '<div id="alerta_div_rejeitar" class="alert alert-danger animated pulse" style="padding: 15px 25px; margin-bottom: 50px;"><strong>Voc&ecirc; j&aacute; est&aacute; matriculado nesta disciplina!</strong><br>Para informa&ccedil;&otilde;es sobre trancamento, utilize o bot&atilde;o "Ajuda" abaixo.</div>';
         btn.attr('disabled', true);
         $('#content').prepend(texto_aviso_rejeitar);
      });
   }

   function modificarElementosCurso() {
      var renderizandoModificacoes = setInterval(() => {
         //Mudando icon de check
         $(".module-item-status-icon [title='Completo']").addClass('icon-Solid icon-publish');
         $('.requirements_message').hide();
      }, 50);

      setTimeout(() => {
         clearInterval(renderizandoModificacoes);
      }, 4000);
   }

   function addBarraProgresso() {
      setTimeout(() => {
         var tituloBarraDeProgresso = 'Progresso da disciplina';
         var quant_itens_unchecked = $('.icon-mark-as-read');
         var quant_itens_checked = $(".module-item-status-icon [title='Completo']");
         var quant_itens_unchecked = quant_itens_unchecked.length;
         var quant_itens_checked = quant_itens_checked.length;
         var quant_itens_curso = quant_itens_checked + quant_itens_unchecked;
         var percentual_concluido = parseInt((100 * quant_itens_checked) / quant_itens_curso);

         if (getTipoDeCurso() == 'bootcamp') {
            tituloBarraDeProgresso = tituloBarraDeProgresso.replace('da disciplina', 'do bootcamp');
         }

         if (percentual_concluido > 0) {
            console.log('Barra de progresso carregada');
            $('#right-side-wrapper').prepend(
               `<div class="progress_bar animated fadeInDown"><div style="padding: 0px 5px;">${tituloBarraDeProgresso} <span style="float: right;">${percentual_concluido}%<span></div><div class="pro-bar" style="margin-top: 7px; border-radius: 50px;"><div class="pro-bg"></div><div class="progress-bar-inner" style="border-radius: 50px; width: ${percentual_concluido}%; background: #00afa2;"></div></div></div>`,
            );
         }
      }, 2000);
   }

   //  EXPOSIÇÃO DE ITENS

   /**Material didático - Início */

   /**Banner Material didático - Bootcamp - Engenheiro de Dados */
   if (url.indexOf('/courses/4368')) {
      $('#context_module_52362').prepend(
         '<a href ="#"><img src="https://online.igti.com.br/courses/4368/files/246255/preview?instfs=true" alt="Material didático" data-api-endpoint="https://online.igti.com.br/courses/4368/files/246255/" data-api-returntype="File"></a>',
      );
   }

   //Banner Material didático - Agile Expert
   if (url.indexOf('/courses/4369')) {
      $('#context_module_52538').prepend(
         '<a href ="#"><img src="https://online.igti.com.br/courses/4369/files/244463/preview?instfs=true" alt="Material didático" data-api-endpoint="https://online.igti.com.br/courses/4369/files/244463/" data-api-returntype="File"></a>',
      );
   }

   //Banner Material didático - Analista de Processos de Negócios
   if (url.indexOf('/courses/4370')) {
      $('#context_module_52370').prepend(
         '<a href ="#"><img src="https://online.igti.com.br/courses/4370/files/244467/preview?instfs=true" alt="Material didático" data-api-endpoint="https://online.igti.com.br/courses/4370/files/244467/" data-api-returntype="File"></a>',
      );
   }
   //Banner Material didático - Arquiteto(a) de Software
   if (url.indexOf('/courses/4371')) {
      $('#context_module_52375').prepend(
         '<a href ="#"><img src="https://online.igti.com.br/courses/4371/files/244531/preview?instfs=true" alt="Material didático" data-api-endpoint="https://online.igti.com.br/courses/4371/files/244531/" data-api-returntype="File"></a>',
      );
   }
   //Banner Material didático - Arquiteto(a) de Software
   if (url.indexOf('/courses/4372')) {
      $('#context_module_52379').prepend(
         '<a href ="#"><img src="https://online.igti.com.br/courses/4372/files/244535/preview?instfs=true" alt="Material didático" data-api-endpoint="https://online.igti.com.br/courses/4372/files/244535/" data-api-returntype="File"></a>',
      );
   }

   //Banner Material didático - Profissional AWS Cloud Computing
   if (url.indexOf('/courses/4373')) {
      $('#context_module_52384').prepend(
         '<a href ="#"><img src="https://online.igti.com.br/courses/4373/files/244536/preview?instfs=true" alt="Material didático" data-api-endpoint="https://online.igti.com.br/courses/4373/files/244536/" data-api-returntype="File"></a>',
      );
   }

   //Banner Material didático - Profissional Azure Cloud Computing
   if (url.indexOf('/courses/4374')) {
      $('#context_module_52389').prepend(
         '<a href ="#"><img src="https://online.igti.com.br/courses/4374/files/244540/preview?instfs=true" alt="Material didático" data-api-endpoint="https://online.igti.com.br/courses/4374/files/244540/" data-api-returntype="File"></a>',
      );
   }

   //Banner Material didático - Analista de Banco de Dados
   if (url.indexOf('/courses/4375')) {
      $('#context_module_52394').prepend(
         '<a href ="#"><img src="https://online.igti.com.br/courses/4375/files/244541/preview?instfs=true" alt="Material didático" data-api-endpoint="https://online.igti.com.br/courses/4375/files/244541/" data-api-returntype="File"></a>',
      );
   }

   //Banner Material didático - Desenvolvedor Business Intelligence
   if (url.indexOf('/courses/4376')) {
      $('#context_module_52399').prepend(
         '<a href ="#"><img src="https://online.igti.com.br/courses/4376/files/244545/preview?instfs=true" alt="Material didático" data-api-endpoint="https://online.igti.com.br/courses/4376/files/244545/" data-api-returntype="File"></a>',
      );
   }

   //Banner Material didático - Analista de Ataque Cibernético
   if (url.indexOf('/courses/4377')) {
      $('#context_module_52403').prepend(
         '<a href ="#"><img src="https://online.igti.com.br/courses/4377/files/244548/preview?instfs=true" alt="Material didático" data-api-endpoint="https://online.igti.com.br/courses/4377/files/244548/" data-api-returntype="File"></a>',
      );
   }

   //Banner Material didático - Cientista de Dados
   if (url.indexOf('/courses/4378')) {
      $('#context_module_52408').prepend(
         '<a href ="#"><img src="https://online.igti.com.br/courses/4378/files/244550/preview?instfs=true" alt="Material didático" data-api-endpoint="https://online.igti.com.br/courses/4378/files/244550/" data-api-returntype="File"></a>',
      );
   }

   //Banner Material didático - Desenvolvedor de NODE.JS
   if (url.indexOf('/courses/4379')) {
      $('#context_module_52412').prepend(
         '<a href ="#"><img src="https://online.igti.com.br/courses/4379/files/244551/preview?instfs=true" alt="Material didático" data-api-endpoint="https://online.igti.com.br/courses/4379/files/244551/" data-api-returntype="File"></a>',
      );
   }

   //Banner Material didático - Desenvolvedor(a) Python
   if (url.indexOf('/courses/4380')) {
      $('#context_module_52417').prepend(
         '<a href ="#"><img src="https://online.igti.com.br/courses/4380/files/247152/preview?instfs=true" alt="Material didático" data-api-endpoint="https://online.igti.com.br/courses/4380/files/247152/" data-api-returntype="File"></a>',
      );
   }

   /**Banner Material didático - Desenvolvedor(a) React */
   if (url.indexOf('/courses/4381')) {
      $('#context_module_52421').prepend(
         '<a href ="#"><img src="https://online.igti.com.br/courses/4381/files/246254/preview?instfs=true" alt="Material didático" data-api-endpoint="https://online.igti.com.br/courses/4381/files/246254/" data-api-returntype="File"></a>',
      );
   }

   //Banner Material didático - Analista de Marketing Digital
   if (url.indexOf('/courses/4382')) {
      $('#context_module_52422').prepend(
         '<a href ="#"><img src="https://online.igti.com.br/courses/4382/files/247153/preview?instfs=true" alt="Material didático" data-api-endpoint="https://online.igti.com.br/courses/4382/files/247153/" data-api-returntype="File"></a>',
      );
   }

   //Banner Material didático - Administrador Linux
   if (url.indexOf('/courses/4383')) {
      $('#context_module_item_272484').append(
         '<a href ="#"><img src="https://online.igti.com.br/courses/4383/files/243744/preview?instfs=true" alt="Material didático" data-api-endpoint="https://online.igti.com.br/courses/4383/files/243744/" data-api-returntype="File"></a>',
      );
   }

   //Banner Material didático - Analista de Defesa Cibernética
   if (url.indexOf('/courses/4384')) {
      $('#context_module_52433').prepend(
         '<a href ="#"><img src="https://online.igti.com.br/courses/4384/files/247154/preview?instfs=true" alt="Material didático" data-api-endpoint="https://online.igti.com.br/courses/4384/files/247154/" data-api-returntype="File"></a>',
      );
   }

   //Banner Material didático - Arquiteto de Cloud Computing
   if (url.indexOf('/courses/4385')) {
      $('#context_module_52442').prepend(
         '<a href ="#"><img src="https://online.igti.com.br/courses/4385/files/247155/preview?instfs=true" alt="Material didático" data-api-endpoint="https://online.igti.com.br/courses/4385/files/247155/" data-api-returntype="File"></a>',
      );
   }

   //Banner Material didático - Analista de Inovação
   if (url.indexOf('/courses/4386')) {
      $('#context_module_52443').prepend(
         '<a href ="#"><img src="https://online.igti.com.br/courses/4386/files/247156/preview?instfs=true" alt="Material didático" data-api-endpoint="https://online.igti.com.br/courses/4386/files/247156/" data-api-returntype="File"></a>',
      );
   }

   //Banner Material didático - Analista de Processos de Negócios
   if (url.indexOf('/courses/4387')) {
      $('#context_module_52447').prepend(
         '<a href ="#"><img src="https://online.igti.com.br/courses/4387/files/247159/preview?instfs=true" alt="Material didático" data-api-endpoint="https://online.igti.com.br/courses/4387/files/247159/" data-api-returntype="File"></a>',
      );
   }

   /**Banner Material didático - Bootcamp - Gerente de Projetos */
   if (url.indexOf('/courses/4388')) {
      $('#context_module_52448').prepend(
         '<a href ="#"><img src="https://online.igti.com.br/courses/4388/files/246260/preview?instfs=true" alt="Material didático" data-api-endpoint="https://online.igti.com.br/courses/4388/files/246260/" data-api-returntype="File"></a>',
      );
   }

   //Banner Material didático - Gestor de Operações de TI
   if (url.indexOf('/courses/4389')) {
      $('#context_module_52455').prepend(
         '<a href ="#"><img src="https://online.igti.com.br/courses/4389/files/247161/preview?instfs=true" alt="Material didático" data-api-endpoint="https://online.igti.com.br/courses/4389/files/247161/" data-api-returntype="File"></a>',
      );
   }

   //Banner Material didático - Gestor de Dados
   if (url.indexOf('/courses/4391')) {
      $('#context_module_52459').prepend(
         '<a href ="#"><img src="https://online.igti.com.br/courses/4391/files/247166/preview?instfs=true" alt="Material didático" data-api-endpoint="https://online.igti.com.br/courses/4391/files/247166/" data-api-returntype="File"></a>',
      );
   }

   //Banner Material didático - Arquiteto de Soluções
   if (url.indexOf('/courses/4392')) {
      $('#context_module_52466').prepend(
         '<a href ="#"><img src="https://online.igti.com.br/courses/4392/files/247167/preview?instfs=true" alt="Material didático" data-api-endpoint="https://online.igti.com.br/courses/4392/files/247167/" data-api-returntype="File"></a>',
      );
   }

   //Banner Material didático - Arquiteto de Soluções
   if (url.indexOf('/courses/4392')) {
      $('#context_module_52466').prepend(
         '<a href ="#"><img src="https://online.igti.com.br/courses/4392/files/247167/preview?instfs=true" alt="Material didático" data-api-endpoint="https://online.igti.com.br/courses/4392/files/247167/" data-api-returntype="File"></a>',
      );
   }

   //Banner Material didático - Gestor de Dados
   if (url.indexOf('/courses/4395')) {
      $('#context_module_52477').prepend(
         '<a href ="#"><img src="https://online.igti.com.br/courses/4395/files/247175/preview?instfs=true" alt="Material didático" data-api-endpoint="https://online.igti.com.br/courses/4395/files/247175/" data-api-returntype="File"></a>',
      );
   }
   //Banner Material didático - Programador de Software Iniciante
   if (url.indexOf('/courses/4396')) {
      $('#context_module_52482').prepend(
         '<a href ="#"><img src="https://online.igti.com.br/courses/4396/files/247177/preview?instfs=true" alt="Material didático" data-api-endpoint="https://online.igti.com.br/courses/4396/files/247177/" data-api-returntype="File"></a>',
      );
   }

   //Banner Material didático - Desenvolvedor(a) Front-end
   if (url.indexOf('/courses/4397')) {
      $('#context_module_52485').prepend(
         '<a href ="#"><img src="https://online.igti.com.br/courses/4397/files/247182/preview?instfs=true" alt="Material didático" data-api-endpoint="https://online.igti.com.br/courses/4397/files/247182/" data-api-returntype="File"></a>',
      );
   }

   //Banner Material didático - Arquiteto de Machine Learning
   if (url.indexOf('/courses/4398')) {
      $('#context_module_52493').prepend(
         '<a href ="#"><img src="https://online.igti.com.br/courses/4398/files/247183/preview?instfs=true" alt="Material didático" data-api-endpoint="https://online.igti.com.br/courses/4398/files/247183/" data-api-returntype="File"></a>',
      );
   }

   //Banner Material didático - Arquiteto de Big Data
   if (url.indexOf('/courses/4399')) {
      $('#context_module_52497').prepend(
         '<a href ="#"><img src="https://online.igti.com.br/courses/4399/files/247185/preview?instfs=true" alt="Material didático" data-api-endpoint="https://online.igti.com.br/courses/4399/files/247185/" data-api-returntype="File"></a>',
      );
   }
   //Banner Material didático - Engenheiro de Deep Learning
   if (url.indexOf('/courses/4400')) {
      $('#context_module_52498').prepend(
         '<a href ="#"><img src="https://online.igti.com.br/courses/4400/files/247192/preview?instfs=true" alt="Material didático" data-api-endpoint="https://online.igti.com.br/courses/4400/files/247192/" data-api-returntype="File"></a>',
      );
   }

   //Banner Material didático - UX Designer
   if (url.indexOf('/courses/4401')) {
      $('#context_module_52502').prepend(
         '<a href ="#"><img src="https://online.igti.com.br/courses/4401/files/247196/preview?instfs=true" alt="Material didático" data-api-endpoint="https://online.igti.com.br/courses/4401/files/247196/" data-api-returntype="File"></a>',
      );
   }

   //Banner Material didático - Engenheiro de Dados Cloud
   if (url.indexOf('/courses/4402')) {
      $('#context_module_52506').prepend(
         '<a href ="#"><img src="https://online.igti.com.br/courses/4402/files/247197/preview?instfs=true" alt="Material didático" data-api-endpoint="https://online.igti.com.br/courses/4402/files/247197/" data-api-returntype="File"></a>',
      );
   }

   //Banner Material didático - Analista de Transformação Digital
   if (url.indexOf('/courses/4403')) {
      $('#context_module_52510').prepend(
         '<a href ="#"><img src="https://online.igti.com.br/courses/4403/files/247199/preview?instfs=true" alt="Material didático" data-api-endpoint="https://online.igti.com.br/courses/4403/files/247199/" data-api-returntype="File"></a>',
      );
   }

   //Banner Material didático - Profissional DevOps
   if (url.indexOf('/courses/4404')) {
      $('#context_module_52514').prepend(
         '<a href ="#"><img src="https://online.igti.com.br/courses/4404/files/247205/preview?instfs=true" alt="Material didático" data-api-endpoint="https://online.igti.com.br/courses/4404/files/247205/" data-api-returntype="File"></a>',
      );
   }

   /**Banner Material didático - Bootcamp - Gestor de TI */
   if (url.indexOf('/courses/4405')) {
      $('#context_module_52518').prepend(
         '<a href ="#"><img src="https://online.igti.com.br/courses/4405/files/246262/preview?instfs=true" alt="Material didático" data-api-endpoint="https://online.igti.com.br/courses/4405/files/246262/" data-api-returntype="File"></a>',
      );
   }

   /**Banner Material didático - Engenheiro(a) de Machine Learning */
   if (url.indexOf('/courses/4408')) {
      $('#context_module_52529').prepend(
         '<a href ="#"><img src="https://online.igti.com.br/courses/4408/files/246277/preview?instfs=true" alt="Material didático" data-api-endpoint="https://online.igti.com.br/courses/4408/files/246277/" data-api-returntype="File"></a>',
      );
   }

   /**Banner Material didático - Product Owner */
   if (url.indexOf('/courses/4407')) {
      $('#context_module_52527').prepend(
         '<a href ="#"><img src="https://online.igti.com.br/courses/4407/files/246308/preview?instfs=true" alt="Material didático" data-api-endpoint="https://online.igti.com.br/courses/4407/files/246308/" data-api-returntype="File"></a>',
      );
   }

   /**Banner Material didático - Product Manager */
   if (url.indexOf('/courses/4409')) {
      $('#context_module_52534').prepend(
         '<a href ="#"><img src="https://online.igti.com.br/courses/4409/files/246307/preview?instfs=true" alt="Material didático" data-api-endpoint="https://online.igti.com.br/courses/4409/files/246307/" data-api-returntype="File"></a>',
      );
   }
   /**Banner Material didático - Product Manager */
   if (url.indexOf('/courses/4406')) {
      $('#context_module_52519').prepend(
         '<a href ="#"><img src="https://online.igti.com.br/courses/4406/files/246311/preview?instfs=true" alt="Material didático" data-api-endpoint="https://online.igti.com.br/courses/4406/files/246311/" data-api-returntype="File"></a>',
      );
   }

   /**Material didático - Fim */

   /**
    * Banner disciplinas
    */

   //AI Solutions

   if (url.indexOf('/courses/4064')) {
      $('#context_module_item_267818').prepend(
         '<a href ="#"><img src="https://online.igti.com.br/courses/4064/files/260129/preview?instfs=true" alt="Material didático" data-api-endpoint="https://online.igti.com.br/courses/4064/files/260129/" data-api-returntype="File"></a>',
      );
   }

   //Programa internacional vale do silício
   if (url.indexOf('/courses/4500')) {
      $('#context_module_item_299039').prepend(
         '<a href ="#"><img src="https://online.igti.com.br/courses/4500/files/260351/preview?instfs=true" alt="Material didático" data-api-endpoint="https://online.igti.com.br/courses/4500/files/260351/" data-api-returntype="File"></a>',
      );
   }

   //Agile world
   if (url.indexOf('/courses/4418')) {
      $('#context_module_item_277796').prepend(
         '<a href ="#"><img src="https://online.igti.com.br/courses/4418/files/260353/preview?instfs=true" alt="Material didático" data-api-endpoint="https://online.igti.com.br/courses/4418/files/260353/" data-api-returntype="File"></a>',
      );
   }

   /**
    * Banner Disciplinas - Fim
    */

   // Data Universe II
   if (url.indexOf('/courses/3230') > 0) {
      // banner principal
      $('#module_44355').append(
         '<img src="https://online.igti.com.br/courses/3230/files/159887/preview?instfs=true" alt="Banner Data Universe">',
      );

      // stand virtual
      $('#context_module_item_205970 div.ig-row').html(
         '<a href ="#"><img src="https://online.igti.com.br/courses/3230/files/160736/preview?instfs=true" alt="Stand Virtual" data-api-endpoint="https://online.igti.com.br/courses/3230/files/160736/" data-api-returntype="File"></a>',
      );
   }
   // Disruptive Revolution
   if (url.indexOf('/courses/3546') > 0) {
      // banner principal
      $('#module_47385').append(
         '<img src="https://online.igti.com.br/courses/3546/files/179941/preview?instfs=true" alt="Banner Disruptive Revolution">',
      );

      // stand virtual
      $('#context_module_item_213070 div.ig-row').html(
         '<a href ="#"><img src="https://online.igti.com.br/courses/3546/files/179940/preview?instfs=true" alt="Stand Virtual" data-api-endpoint="https://online.igti.com.br/courses/3546/files/179940/" data-api-returntype="File"></a>',
      );
   }

   // Cyber & Cloud Experience II
   if (url.indexOf('/courses/3580') > 0) {
      // stand virtual
      $('#context_module_item_228282 div.ig-row').html(
         '<a href ="#"><img src="https://online.igti.com.br/users/128682/files/185685/preview?instfs=true" alt="Stand Virtual" data-api-endpoint="https://online.igti.com.br/users/128682/files/185685/" data-api-returntype="File"></a>',
      );
   }

   // AI Today
   if (url.indexOf('/courses/3581') > 0) {
      // stand virtual
      $('#context_module_item_228283 div.ig-row').html(
         '<a href ="#"><img src="https://online.igti.com.br/courses/3581/files/193272/preview?instfs=true" alt="Stand Virtual" data-api-endpoint="https://online.igti.com.br/courses/3581/files/193272/" data-api-returntype="File"></a>',
      );
   }

   // Agile World
   if (url.indexOf('/courses/3911') > 0) {
      // banner principal
      $('#module_49719').append(
         '<img src="https://online.igti.com.br/courses/3911/files/204565/preview?instfs=true" alt="Banner Agile World">',
      );
   }

   // Vale do Silício II
   if (url.indexOf('/courses/3975') > 0) {
      // banner principal
      $('#module_49851').append(
         '<img src="https://online.igti.com.br/courses/3975/files/207801/preview?instfs=true" alt="Banner Vale do Silício">',
      );
   }
   // Area do Assinante
   if (url.indexOf('/courses/4288') > 0) {
      // banner principal
      $('#module_52009').append(
         '<img src="https://online.igti.com.br/courses/4288/files/235418/preview?instfs=true" alt="Banner Area do Assinante">',
      );
   }

   // Dev Summit III
   if (url.indexOf('/courses/3788') > 0) {
      // stand virtual
      $('#context_module_item_242281 div.ig-row').html(
         '<a href ="#"><img src="https://online.igti.com.br/courses/3788/files/209139/preview?instfs=true" alt="Stand Virtual" data-api-endpoint="https://online.igti.com.br/courses/3788/files/209139/" data-api-returntype="File"></a>',
      );
   }

   // Dev Summit III Segmentação Pós
   if (url.indexOf('/courses/3781') > 0) {
      // stand virtual
      $('#context_module_item_234202 div.ig-row').html(
         '<a href ="#"><img src="https://online.igti.com.br/courses/3788/files/209139/preview?instfs=true" alt="Stand Virtual" data-api-endpoint="https://online.igti.com.br/courses/3788/files/209139/" data-api-returntype="File"></a>',
      );
   }

   // Dev Summit III Segmentação Trilha
   if (url.indexOf('/courses/3766') > 0) {
      // stand virtual
      $('#context_module_item_234159 div.ig-row').html(
         '<a href ="#"><img src="https://online.igti.com.br/courses/3788/files/209139/preview?instfs=true" alt="Stand Virtual" data-api-endpoint="https://online.igti.com.br/courses/3788/files/209139/" data-api-returntype="File"></a>',
      );
   }

   // Data Universe III
   if (url.indexOf('/courses/3909') > 0) {
      // stand virtual
      $('#context_module_item_255508 div.ig-row').html(
         '<a href ="#"><img src="https://online.igti.com.br/courses/3909/files/219462/preview?instfs=true" alt="Stand Virtual" data-api-endpoint="https://online.igti.com.br/courses/3909/files/219462/" data-api-returntype="File"></a>',
      );
   }
   // Agile Days
   if (url.indexOf('/courses/4019') > 0) {
      // stand virtual
      $('#context_module_item_260102 div.ig-row').html(
         '<a href ="#"><img src="https://online.igti.com.br/courses/4019/files/243434/preview?instfs=true" alt="Stand Virtual" data-api-endpoint="https://online.igti.com.br/courses/4019/files/243434/" data-api-returntype="File"></a>',
      );
   }
   // Cyber Security Experience
   if (url.indexOf('/courses/4020') > 0) {
      // stand virtual
      $('#context_module_item_262621 div.ig-row').html(
         '<a href ="#"><img src="https://online.igti.com.br/courses/4020/files/232686/preview?instfs=true" alt="Stand Virtual" data-api-endpoint="https://online.igti.com.br/courses/4020/files/232686/" data-api-returntype="File"></a>',
      );
   }
   // DevOps e SRE Speedy
   if (url.indexOf('/courses/4394') > 0) {
      // stand virtual
      $('#context_module_item_276598 div.ig-row').html(
         '<a href ="#"><img src="https://online.igti.com.br/courses/4394/files/240398/preview?instfs=true" alt="Stand Virtual" data-api-endpoint="https://online.igti.com.br/courses/4394/files/240398/" data-api-returntype="File"></a>',
      );
   }
   // Cloud Conference
   if (url.indexOf('/courses/4502') > 0) {
      // stand virtual
      $('#context_module_item_288429 div.ig-row').html(
         '<a href ="#"><img src="https://online.igti.com.br/courses/4502/files/253276/preview?instfs=true" alt="Stand Virtual" data-api-endpoint="https://online.igti.com.br/courses/4502/files/253276/" data-api-returntype="File"></a>',
      );
   }

   // Disruptive Revolution II
   if (url.indexOf('/courses/4503') > 0) {
      // stand virtual
      $('#context_module_53016').append(
         '<a href ="#"><img src="https://online.igti.com.br/courses/4503/files/253269/preview?instfs=true" alt="Stand Virtual" data-api-endpoint="https://online.igti.com.br/courses/4503/files/253269/" data-api-returntype="File"></a>',
      );
   }

   // Dev Summit IV
   if (url.indexOf('/courses/4504') > 0) {
      // stand virtual
      $('#context_module_item_288465 div.ig-row').html(
         '<a href ="#"><img src="https://online.igti.com.br/courses/4504/files/298261/preview?instfs=true" alt="Stand Virtual" data-api-endpoint="https://online.igti.com.br/courses/4504/files/281948/" data-api-returntype="File"></a>',
      );
   }
   // AI Today II
   if (url.indexOf('/courses/4505') > 0) {
      // stand virtual
      $('#context_module_item_288453 div.ig-row').html(
         '<a href ="#"><img src="https://online.igti.com.br/courses/4505/files/281936/preview?instfs=true" alt="Stand Virtual" data-api-endpoint="https://online.igti.com.br/courses/4505/files/281936/" data-api-returntype="File"></a>',
      );
   }

   // Data Universe IV
   if (url.indexOf('/courses/4506') > 0) {
      // stand virtual
      $('#context_module_item_288477 div.ig-row').html(
         '<a href ="#"><img src="https://online.igti.com.br/courses/4506/files/253271/preview?instfs=true" alt="Stand Virtual" data-api-endpoint="https://online.igti.com.br/courses/4506/files/253271/" data-api-returntype="File"></a>',
      );
   }

   // Agile Days III
   if (url.indexOf('/courses/4507') > 0) {
      // stand virtual
      $('#context_module_item_288489 div.ig-row').html(
         '<a href ="#"><img src="https://online.igti.com.br/courses/4507/files/288130/preview?instfs=true" alt="Stand Virtual" data-api-endpoint="https://online.igti.com.br/courses/4507/files/288130/" data-api-returntype="File"></a>',
      );
   }
   // Cyber Security Experience II
   if (url.indexOf('/courses/4527') > 0) {
      // stand virtual
      $('#context_module_item_290674 div.ig-row').html(
         '<a href ="#"><img src="https://online.igti.com.br/courses/4527/files/281949/preview?instfs=true" alt="Stand Virtual" data-api-endpoint="https://online.igti.com.br/courses/4527/files/281949/" data-api-returntype="File"></a>',
      );
   }

   //Speed Wiz Dev
   if (url.indexOf('/courses/4280') > 0) {
      //Banner termômetro
      $('#context_module_item_280860').prepend(
         '<img src="https://online.igti.com.br/courses/4280/files/243580/preview?instfs=true" alt="Speed Wiz Dev">',
      );
   }

   //Dev Summit - Speedy
   if (url.indexOf('/courses/4799') > 0) {
      // stand virtual
      $('#context_module_item_309583 div.ig-row').html(
         '<a href ="#"><img src="https://online.igti.com.br/courses/4799/files/268510/preview?instfs=true" alt="Stand Virtual" data-api-endpoint="https://online.igti.com.br/courses/4799/files/268510/" data-api-returntype="File"></a>',
      );
   }

   //AI Solutions Imersão internacional
   if (url.indexOf('/courses/4610') > 0) {
      // stand virtual
      $('#context_module_content_53997').prepend(
         '<a href ="#"><img src="https://online.igti.com.br/courses/4610/files/280425/preview?instfs=true" alt="Stand Virtual" data-api-endpoint="https://online.igti.com.br/courses/4610/files/280425/" data-api-returntype="File"></a>',
      );
   }
   if (url.indexOf('/courses/4797') > 0) {
      // Stand Virtual
      $('#context_module_content_54460').prepend(
         '<a href ="#"><img src="https://online.igti.com.br/courses/4797/files/280431/preview?instfs=true" alt="Stand Virtual" data-api-endpoint="https://online.igti.com.br/courses/4797/files/280431/" data-api-returntype="File"></a>',
      );
   }

   if (url.indexOf('/courses/4805') > 0) {
      // Stand Virtual
      $('#context_module_content_54844').prepend(
         '<a href ="#"><img src="https://online.igti.com.br/courses/4797/files/280431/preview?instfs=true" alt="Stand Virtual" data-api-endpoint="https://online.igti.com.br/courses/4797/files/280431/" data-api-returntype="File"></a>',
      );
   }

   //Imersão Vale do Silício
   if (url.indexOf('/courses/4607') > 0) {
      // stand virtual
      $('#context_module_item_306991 div.ig-row').html(
         '<a href ="#"><img src="https://online.igti.com.br/courses/4607/files/280442/preview?instfs=true" alt="Stand Virtual" data-api-endpoint="https://online.igti.com.br/courses/4607/files/280442/" data-api-returntype="File"></a>',
      );
   }
   if (url.indexOf('/courses/4796') > 0) {
      // stand virtual
      $('#context_module_item_311836 div.ig-row').html(
         '<a href ="#"><img src="https://online.igti.com.br/courses/4607/files/280442/preview?instfs=true" alt="Stand Virtual" data-api-endpoint="https://online.igti.com.br/courses/4607/files/280442/" data-api-returntype="File"></a>',
      );
   }
   if (url.indexOf('/courses/4804') > 0) {
      // stand virtual
      $('#context_module_item_320056 div.ig-row').html(
         '<a href ="#"><img src="https://online.igti.com.br/courses/4607/files/280442/preview?instfs=true" alt="Stand Virtual" data-api-endpoint="https://online.igti.com.br/courses/4607/files/280442/" data-api-returntype="File"></a>',
      );
   }
   //Agile World Imersão Internacional
   if (url.indexOf('/courses/4612') > 0) {
      // stand virtual
      $('#context_module_item_307003 div.ig-row').html(
         '<a href ="#"><img src="https://online.igti.com.br/courses/4798/files/280670/preview?instfs=true" alt="Stand Virtual" data-api-endpoint="https://online.igti.com.br/courses/4798/files/280670/" data-api-returntype="File"></a>',
      );
   }
   if (url.indexOf('/courses/4806') > 0) {
      // stand virtual
      $('#context_module_item_319903 div.ig-row').html(
         '<a href ="#"><img src="https://online.igti.com.br/courses/4798/files/280670/preview?instfs=true" alt="Stand Virtual" data-api-endpoint="https://online.igti.com.br/courses/4798/files/280670/" data-api-returntype="File"></a>',
      );
   }
   if (url.indexOf('/courses/4798') > 0) {
      // stand virtual
      $('#context_module_item_311772 div.ig-row').html(
         '<a href ="#"><img src="https://online.igti.com.br/courses/4798/files/280670/preview?instfs=true" alt="Stand Virtual" data-api-endpoint="https://online.igti.com.br/courses/4798/files/280670/" data-api-returntype="File"></a>',
      );
   }
   //Cyber Security Experience
   if (url.indexOf('/courses/4909') > 0) {
      // stand virtual
      $('#context_module_item_318101 div.ig-row').html(
         '<a href ="#"><img src="https://online.igti.com.br/courses/4909/files/280672/preview?instfs=true" alt="Stand Virtual" data-api-endpoint="https://online.igti.com.br/courses/4909/files/280672/" data-api-returntype="File"></a>',
      );
   }
   //DevOPS & SRE Speedy
   if (url.indexOf('/courses/4910') > 0) {
      // stand virtual
      $('#context_module_item_318134 div.ig-row').html(
         '<a href ="#"><img src="https://online.igti.com.br/courses/4910/files/288144/preview?instfs=true" alt="Stand Virtual" data-api-endpoint="https://online.igti.com.br/courses/4910/files/288144/" data-api-returntype="File"></a>',
      );
   }
   //Data Universe V
   if (url.indexOf('/courses/4912') > 0) {
      // stand virtual
      $('#context_module_item_318200 div.ig-row').html(
         '<a href ="#"><img src="https://online.igti.com.br/courses/4912/files/281940/preview?instfs=true" alt="Stand Virtual" data-api-endpoint="https://online.igti.com.br/courses/4912/files/281940/" data-api-returntype="File"></a>',
      );
   }
   //Cloud Conference II
   if (url.indexOf('/courses/4911') > 0) {
      // stand virtual
      $('#context_module_item_318167 div.ig-row').html(
         '<a href ="#"><img src="https://online.igti.com.br/courses/4911/files/281944/preview?instfs=true" alt="Stand Virtual" data-api-endpoint="https://online.igti.com.br/courses/4911/files/281944/" data-api-returntype="File"></a>',
      );
   }
   //Gestão Exponencial - XPEED
   if (url.indexOf('/courses/4947') > 0) {
      // stand virtual
      $('#context_module_item_325096 div.ig-row').html(
         '<a href ="#"><img src="https://online.igti.com.br/courses/4947/files/288146/preview?instfs=true" alt="Stand Virtual" data-api-endpoint="https://online.igti.com.br/courses/4947/files/288146/" data-api-returntype="File"></a>',
      );
   }
   //Dinheiro sem Tabu: Crenças Financeiras - XPeed
   if (url.indexOf('/courses/5048') > 0) {
      // stand virtual
      $('#module_55741').append(
         '<img src="https://online.igti.com.br/courses/5048/files/295775/preview?instfs=true" alt="Dinheiro sem tabu: Crenças Financeiras">',
      );
   }
   //Dinheiro sem Tabu: Crenças Financeiras - XPeed
   if (url.indexOf('/courses/5048') > 0) {
      // stand virtual
      $('#module_55741').append(
         '<img src="https://online.igti.com.br/courses/5048/files/295775/preview?instfs=true" alt="Dinheiro sem tabu: Crenças Financeiras">',
      );
   }
   //O beabá financeiro - XPeed
   if (url.indexOf('/courses/5049') > 0) {
      // stand virtual
      $('#module_55746').append(
         '<img src="https://online.igti.com.br/courses/5049/files/295777/preview?instfs=true" alt="O beabá financeiro">',
      );
   }
   //Desafio da Prosperidade para Casais - XPeed
   if (url.indexOf('/courses/5052') > 0) {
      // stand virtual
      $('#module_55752').append(
         '<img src="https://online.igti.com.br/courses/5052/files/295905/preview?instfs=true" alt="Desafio da Prosperidade para Casais">',
      );
   }
   //O poder do autoconhecimento financeiro - XPeed
   if (url.indexOf('/courses/5053') > 0) {
      // stand virtual
      $('#module_55755').append(
         '<img src="https://online.igti.com.br/courses/5053/files/295920/preview?instfs=true" alt="O poder do autoconhecimento financeiro">',
      );
   }

   //Educação financeira para jovens - XPeed
   if (url.indexOf('/courses/5054') > 0) {
      // stand virtual
      $('#module_55758').append(
         '<img src="https://online.igti.com.br/courses/5054/files/295922/preview?instfs=true" alt="Educação financeira para jovens">',
      );
   }

   //Viva de Renda com Fundos Imobiliários - XPeed
   if (url.indexOf('/courses/5057') > 0) {
      // stand virtual
      $('#module_55768').append(
         '<img src="https://online.igti.com.br/courses/5057/files/295923/preview?instfs=true" alt="Viva de Renda com Fundos Imobiliários">',
      );
   }

   //Previdência e Planejamento: Turbinando a sua aposentadoria - XPeed
   if (url.indexOf('/courses/5059') > 0) {
      // stand virtual
      $('#module_55774').append(
         '<img src="https://online.igti.com.br/courses/5059/files/295924/preview?instfs=true" alt="Previdência e Planejamento: Turbinando a sua aposentadoria">',
      );
   }

   //Renda Fixa: Ganhos com baixo risco - XPeed
   if (url.indexOf('/courses/5060') > 0) {
      // stand virtual
      $('#module_55777').append(
         '<img src="https://online.igti.com.br/courses/5060/files/295948/preview?instfs=true" alt="Renda Fixa: Ganhos com baixo risco">',
      );
   }

   //In The Money: Como começar a lucrar com Opções - XPeed
   if (url.indexOf('/courses/5061') > 0) {
      // stand virtual
      $('#module_55780').append(
         '<img src="https://online.igti.com.br/courses/5061/files/295949/preview?instfs=true" alt="In The Money: Como começar a lucrar com Opções">',
      );
   }

   //Primeiros Passos no Mundo dos Investimentos - Nível 2 - XPeed
   if (url.indexOf('/courses/5062') > 0) {
      // stand virtual
      $('#module_55783').append(
         '<img src="https://online.igti.com.br/courses/5062/files/295950/preview?instfs=true" alt="Primeiros Passos no Mundo dos Investimentos - Nível 2">',
      );
   }

   //Diversificação de Carteira e Gerenciamento de Risco - XPeed
   if (url.indexOf('/courses/5063') > 0) {
      // stand virtual
      $('#module_55786').append(
         '<img src="https://online.igti.com.br/courses/5063/files/295951/preview?instfs=true" alt="Diversificação de Carteira e Gerenciamento de Risco">',
      );
   }

   //Aprenda a Investir na Bolsa de Valores - XPeed
   if (url.indexOf('/courses/5064') > 0) {
      // stand virtual
      $('#module_55789').append(
         '<img src="https://online.igti.com.br/courses/5064/files/295952/preview?instfs=true" alt="Aprenda a Investir na Bolsa de Valores">',
      );
   }

   //Análise Fundamentalista: Identifique os Futuros Ganhadores da Bolsa - XPeed
   if (url.indexOf('/courses/5065') > 0) {
      // stand virtual
      $('#module_55792').append(
         '<img src="https://online.igti.com.br/courses/5065/files/295958/preview?instfs=true" alt="Análise Fundamentalista: Identifique os Futuros Ganhadores da Bolsa">',
      );
   }

   //Especialista em investimentos no exterior: encontre oportunidades fora do Brasil - XPeed
   if (url.indexOf('/courses/5066') > 0) {
      // stand virtual
      $('#module_55764').append(
         '<img src="https://online.igti.com.br/courses/5066/files/296335/preview?instfs=true" alt="Especialista em investimentos no exterior: encontre oportunidades fora do Brasil">',
      );
   }

   //Valuation: Avaliação de Empresas e Ações - XPeed
   if (url.indexOf('/courses/5067') > 0) {
      // stand virtual
      $('#module_557994').append(
         '<img src="https://online.igti.com.br/courses/5067/files/296336/preview?instfs=true" alt="Valuation: Avaliação de Empresas e Ações">',
      );
   }

   //Excel para Finanças - XPeed
   if (url.indexOf('/courses/5068') > 0) {
      // stand virtual
      $('#module_55916').append(
         '<img src="https://online.igti.com.br/courses/5068/files/296347/preview?instfs=true" alt="Excel para Finanças">',
      );
   }

   //Consistência no Day Trade & Gestão Emocional - XPeed
   if (url.indexOf('/courses/5069') > 0) {
      // stand virtual
      $('#module_55937').append(
         '<img src="https://online.igti.com.br/courses/5069/files/296359/preview?instfs=true" alt="Consistência no Day Trade & Gestão Emocional">',
      );
   }

   //Introdução ao Universo de Trading: conceitos básicos - XPeed
   if (url.indexOf('/courses/5070') > 0) {
      // stand virtual
      $('#module_55810').append(
         '<img src="https://online.igti.com.br/courses/5070/files/296360/preview?instfs=true" alt="Introdução ao Universo de Trading: conceitos básicos">',
      );
   }

   //Start na Renda Variável - XPeed
   if (url.indexOf('/courses/5071') > 0) {
      // stand virtual
      $('#module_55810').append(
         '<img src="https://online.igti.com.br/courses/5071/files/296369/preview?instfs=true" alt="Start na Renda Variável">',
      );
   }

   //Preço vs Tempo: Estratégias para Swing Trade - XPeed
   if (url.indexOf('/courses/5072') > 0) {
      // stand virtual
      $('#module_55816').append(
         '<img src="https://online.igti.com.br/courses/5072/files/296370/preview?instfs=true" alt="Preço vs Tempo: Estratégias para Swing Trade">',
      );
   }

   //Tudo que aprendi em 12 anos de Day Trade - XPeed
   if (url.indexOf('/courses/5073') > 0) {
      // stand virtual
      $('#module_55819').append(
         '<img src="https://online.igti.com.br/courses/5073/files/296372/preview?instfs=true" alt="Tudo que aprendi em 12 anos de Day Trade">',
      );
   }

   //Análise Técnica Clássica - XPeed
   if (url.indexOf('/courses/5074') > 0) {
      // stand virtual
      $('#module_55823').append(
         '<img src="https://online.igti.com.br/courses/5074/files/296373/preview?instfs=true" alt="Análise Técnica Clássica">',
      );
   }

   //Os segredos do melhor analista do Brasil 2.0 - XPeed
   if (url.indexOf('/courses/5075') > 0) {
      // stand virtual
      $('#module_55826').append(
         '<img src="https://online.igti.com.br/courses/5075/files/296376/preview?instfs=true" alt="Os segredos do melhor analista do Brasil 2.0">',
      );
   }

   //Estratétegia de Renda Continua e Progressiva - XPeed
   if (url.indexOf('/courses/5076') > 0) {
      // stand virtual
      $('#module_55830').append(
         '<img src="https://online.igti.com.br/courses/5076/files/296396/preview?instfs=true" alt="Estratétegia de Renda Continua e Progressiva">',
      );
   }

   //Alquimia do Tempo - XPeed
   if (url.indexOf('/courses/5077') > 0) {
      // stand virtual
      $('#module_55833').append(
         '<img src="https://online.igti.com.br/courses/5077/files/296402/preview?instfs=true" alt="Alquimia do Tempo">',
      );
   }

   //Aprenda a Investir em operações Estrututuradas - XPeed
   if (url.indexOf('/courses/5078') > 0) {
      // stand virtual
      $('#module_55836').append(
         '<img src="https://online.igti.com.br/courses/5078/files/296412/preview?instfs=true" alt="Aprenda a Investir em operações Estrututuradas">',
      );
   }

   //Long & Short Pro - XPeed
   if (url.indexOf('/courses/5079') > 0) {
      // stand virtual
      $('#module_55843').append(
         '<img src="https://online.igti.com.br/courses/5079/files/296412/preview?instfs=true" alt="Long & Short Pro">',
      );
   }

   //Minicontratos do zero: conceitos e operacionais - XPeed
   if (url.indexOf('/courses/5080') > 0) {
      // stand virtual
      $('#module_55840').append(
         '<img src="https://online.igti.com.br/courses/5080/files/296412/preview?instfs=true" alt="Minicontratos do zero: conceitos e operacionais">',
      );
   }

   //CriptoInvestidor - XPeed
   if (url.indexOf('/courses/5055') > 0) {
      // stand virtual
      $('#module_55761').append(
         '<img src="https://online.igti.com.br/courses/5055/files/296417/preview?instfs=true" alt="CriptoInvestidor">',
      );
   }

   //Especialista em investimentos no exterior: encontre oportunidades fora do Brasil - XPeed
   if (url.indexOf('/courses/5056') > 0) {
      // stand virtual
      $('#module_55764').append(
         '<img src="https://online.igti.com.br/courses/5056/files/296439/preview?instfs=true" alt="Especialista em investimentos no exterior: encontre oportunidades fora do Brasil">',
      );
   }

   //Cenários e investimentos: Macroeconomia para Investidores - XPeed
   if (url.indexOf('/courses/5058') > 0) {
      // stand virtual
      $('#module_55771').append(
         '<img src="https://online.igti.com.br/courses/5058/files/296449/preview?instfs=true" alt="Cenários e investimentos: Macroeconomia para Investidores">',
      );
   }

   // -----------------------------------------------------------------------------------

   //
   // if (url.indexOf('/courses/3003')) {
   //     $('#context_module_item_203440 div.ig-row').html('<div style="width: 100%; margin-left: auto; margin-right: auto; overflow: hidden;"><h1 align="center"><iframe src="https://player.vimeo.com/video/440372134?title=0&byline=0&portrait=0" position: "relative" overflow:"hidden" width="100%" height="400px" frameborder="0" allow="autoplay; fullscreen" allowfullscreen=""></iframe></h1></div>')
   // }

   function aplicarDesignTelaRecuperacaoDeSenha() {
      $('#content').css({
         display: 'flex',
         'justify-content': 'center',
      });

      $('#modal-box').css('width', 'auto');

      $('#modal-box>div').css({
         padding: '40px',
         background: '#f2f2f2',
         'border-radius': '5px',
      });

      $('body').css(
         'background-image',
         'url("https://lh3.googleusercontent.com/fife/ABSRlIqRQpgzT4fsSRLsrbHDQu-VMv6KVnGY-nZjMlFplnlsJl_gKyWCnySL7EkR6BCU_YcFIUYJQaDkqTR0AtOQKCqkZ2kV4o7ep7PMc9vMj6zKjf39FPyRlEeIjBLYKxOD15TWr6eWeor-QYosscPLgG4V2QG_K8E-dnRKSU4B-rcqU_A0_hgDExSDIdCL7sJUge2JI0Hdl-5J1AkqfZUPGI76p3HcyZdNWWj1UZemFK8kH-7uEU7JVCPawUkZLc4TbFQcR_CfnyZyDucskRsuQ_aT7OZR4VHZDImm6aCc2TOnh2hnOfK5b3kMtTfexh8D2k8rGLXUe_piMhN9JYXzM3iP1DNbZuSxHNf_OluHGbCVmaMpGER9OHQkE8fyXIHWWwmwoa41fBt0RidIQ0W98e5LSyr5Hb9uZ3uDTbeqX6hWW2CuH0pwPxG3C41KVCij5DJIIjsrPVhAuTXyzYkdi49N5fuJuN46XpLD1gOM417L0rTXHadr-eKJmF84IIQz04-4VqTNIoxwIRFvn8fNBmNBYGaB-6GbtzKM6ARkinstVAHME3tV4A7Z0Oqfil2JANKEOedlr8LpNZ-6ZFIhOjCWerV7HDwhX7EaBVRSv5sRTxNecjf614dSrGr4oxeEGUzpcTm2x1yytqmIZIWZXVrFlNNLe6HOskZyIQ183pgfAnNpuRAauuk_F8c3fhZc4jlv7BZRssMUg7VvzNZc6nIGq9tX8oOzAtw=w1920-h853-ft")',
      );
      $('body').css('background-size', 'cover');
      $('h2').css({
         margin: '0px',
         width: '350px',
         'font-size': '16px',
      });
      $('tr td div').css({
         'font-size': '16px',
         'margin-bottom': '30px',
      });
      $('#modal-box>div').prepend(
         '<div style="width: 100%; display: flex; align-items: center; justify-content: center; margin-bottom: 30px"><img width="160" src="https://online.igti.com.br/accounts/1/files/252/download?verifier=ZfZYgbiiHV0rvvo987QT8phjAVYVNcxuqT0cBe1p" / ></div>',
      );
   }

   function customizarLoginMobile() {
      if ($(window).width() < 600) {
         $('.mobileLogin-Header').remove();

         $('#f1_card').prepend(
            '<img src="https://igtieadstorage.blob.core.windows.net/repositorio-imagens/logo_igti_branca_2021.png" width="200px">',
         );
         $('#f1_container').css({
            'background-image': 'none',
            width: '100%',
            display: 'flex',
            'align-items': 'center',
            'justify-content': 'center',
            'flex-direction': 'column',
            margin: '0',
            padding: '0',
         });
         $('#f1_card').css({
            width: '100%',
            display: 'flex',
            'align-items': 'center',
            'flex-direction': 'column',
         });
         $('img').css({
            margin: '20px 0',
         });

         $('#login_form').css({
            width: '80%',
            'background-color': 'rgb(232, 232, 232)',
            padding: '10px',
            'border-radius': '5px',
         });
         $('.forgot-password').text('Cadastrar ou recuperar senha');
         $('.forgot-password').css({
            'text-decoration': 'underline',
            color: 'rgb(83,80,80)',
         });
         $('.touch').css('background', 'white');
      }
   }

   //IMPLEMENTAÇÕES ANTIGAS

   //Retira o overlay de cor dos boxs de cursos no dashboard:
   var cursos = document.getElementsByClassName('ic-DashboardCard__header_hero');
   for (var i = 0; i < cursos.length; i++) {
      cursos[i].style.opacity = '0';
   }

   //retira a opção de colocar apelidos no cursos se não for administrador
   if ($.inArray('admin', ENV.current_user_roles) == -1) {
      var apelidoUI = $('.ColorPicker__Container > .ic-Form-control');
      //retira opção de mudar a cor do curso.
      $('.ic-DashboardCard__header-button').remove();
      //var apelidoUI = document.getElementsByClassName('.ColorPicker__Container.ic-Form-control');
      for (var i = 0; i < apelidoUI.length; i++) {
         apelidoUI[i].style.display = 'none';
         //$(".ic-DashboardCard__header-button").hide();
      }
   }
   /*
    //esconde o link de download do arquivo
    if(window.location.pathname.indexOf('/files/') >= 0){
    $("#content div:first").remove();
    //$("h2").hide();
    }*/

   //se estiver na página inicial do grupo:,

   if (window.location.pathname.indexOf('/quizzes/') >= 0) {
      $('a#preview_quiz_button').click(function () {
         setTimeout(setQuizzesWarnings, 100);
      });
   }

   function setQuizzesWarnings() {
      $('#ui-id-1').text('Atenção!');
      $('#js-sequential-warning-dialogue').text(
         'Assim que enviar sua resposta, não será possível mudá-la posteriormente. Você não conseguirá ver a questão anterior.',
      );
      $('.ui-dialog .btn:contains("Begin")').text('Iniciar!');
   }

   //CLick no preview do arquivo
   if (window.location.pathname.indexOf('/wiki') >= 0) {
      setTimeout(loadPreviewer, 130);
   }
   if (window.location.pathname.indexOf('/pages') >= 0) {
      setTimeout(loadPreviewer, 130);
   }

   function loadPreviewer() {
      $('a.file_preview_link').trigger('click');
   }

   //traduzir True or false
   if (window.location.pathname.indexOf('/quizzes') >= 0) {
      var searchTtrue = 'True';
      var searchFalse = 'False';

      $('.answer_label label')
         .filter(function () {
            return $(this).text() === searchTtrue;
         })
         .text('Verdadeiro');

      $('.answer_label label')
         .filter(function () {
            return $(this).text() === searchFalse;
         })
         .text('Falso');

      if ($('.lock_explanation').length) {
         $('.lock_explanation').html(
            $('.lock_explanation').html().replace('travado', 'indisponível'),
         );
      }
   }

   $('.ui-tabs-anchor:contains("Perguntas")').click(function () {
      setTimeout(translateQuizesTexts, 500);
   });

   function translateQuizesTexts() {
      var searchTtrue = 'True';
      var searchFalse = 'False';

      console.log('teste!!!');
      $('.answer_text')
         .filter(function () {
            return $(this).text() === searchTtrue;
         })
         .text('Verdadeiro');

      $('.answer_text')
         .filter(function () {
            return $(this).text() === searchFalse;
         })
         .text('Falso');

      if ($('.question_name').length) {
         $('.question_name').each(function (index) {
            $(this).html($('this').html().replace('Question', 'Pergunta'));
         });
      }
   }

   //tradução to-do-list

   if ($('.todo-details__title').length) {
      $('.todo-details__title').each(function (index) {
         $(this).html($(this).html().replace('Pegar', 'Fazer'));
      });
   }

   //traduzir Imported assignments
   if (window.location.pathname.indexOf('/assignments') >= 0) {
      //$('.element_toggler:contains("Imported Assignments")').text('Tarefas Importadas');
   }
   if (window.location.pathname.indexOf('/grades') >= 0) {
      //$('.student_assignment .title:contains("Imported Assignments")').text("Tarefas Importadas");
   }

   //TELA DE LOGIN
   if (window.location.pathname.indexOf('/login/canvas') >= 0) {
      //esconde log da instructure
      $('.ic-Login-footer__logo-link').hide();
      //muda links do Twitter e Facebook
      $("a[href='http://twitter.com/instructure']").attr(
         'href',
         'https://twitter.com/InstitutoGTI',
      ); //Twitter
      $("a[href='http://facebook.com/instructure']").attr(
         'href',
         'https://www.facebook.com/institutogti',
      ); //facebook
      //mudar texto de esqueceu a senha
      $('#login_forgot_password').text('Cadastrar ou recuperar senha');

      if (
         /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)
      ) {
         $('body').css('background-color', '#00afa2');
         $('body').css('background-image', 'none');
      }
   }

   $('html').css('background-color', '#fff');
   $('html').css('background-image', 'none');

   //Mudanças no menu Global = Painel e Disciplinas
   $('#global_nav_dashboard_link .menu-item__text').text('Painel');
   $('#global_nav_courses_link .menu-item__text').text('Disciplinas');
   $('.ic-Dashboard-header__title').text('Painel');

   $('.header-bar:contains("Todos os Cursos")').html('<h2>Todas as Disciplinas</h2>');
   $('thead .course-list-course-title-column:contains("Curso")').text('Disciplinas');

   $('#global_nav_courses_link').click(function () {
      setTimeout(setCoursesToDisciplinas, 100);
   });

   function setCoursesToDisciplinas() {
      $('.ic-NavMenu__headline').text('Disciplinas');
      $('.ic-NavMenu-list-item__link:contains("Todos os Cursos")').text('Todas as Disciplinas');
      $('.ic-NavMenu__secondary-content').text(
         'Bem-vindo as suas Disciplinas! Para personalizar a lista de disciplinas, clique no link "Todas as Disciplinas" e coloque uma estrela nas disciplinas para serem exibidas.',
      );
   }

   //esconde rodapé da Instructure
   $('.ic-app-footer').hide();
   $('#footer').hide();

   //grupos dos cursos no hangout
   if (window.location.pathname.indexOf('/conferences') >= 0) {
      $(window).load(function () {
         $('img').each(function () {
            if (
               !this.complete ||
               typeof this.naturalWidth == 'undefined' ||
               this.naturalWidth == 0
            ) {
               // image was broken, replace with your new image
               this.src =
                  'https://instructure-uploads.s3.amazonaws.com/account_96230000000000001/attachments/9/panda-cycle-loader.gif?AWSAccessKeyId=AKIAJFNFXH2V2O7RPCAA&Expires=1947934279&Signature=CcaVDMUa5by1evBxpB9pFQBOoig%3D&response-cache-control=Cache-Control%3Amax-age%3D473364000.0%2C%20public&response-expires=473364000.0';
            }
         });
      });

      if (
         $.inArray('admin', ENV['current_user_roles']) > -1 ||
         $.inArray('teacher', ENV['current_user_roles']) > -1
      ) {
         //this might go somewhere else... inside the .jsonGroups.lenght if
         var $hangoutContentDiv = $('<div>', {
            id: 'hangoutDivs',
            class: 'item-group-container item-box',
         });
         $('#content-wrapper').append('<div id="hangoutMain" class="ic-Layout-contentMain"></div>');
         $('#hangoutMain').append($hangoutContentDiv);

         var currentCourseID;
         var currentCourseName;
         var groupsIDs;
         var inviteList = '';
         var mailList = '';
         var currentMailList = '';

         document.addEventListener('copy', function (e) {
            e.preventDefault();
            e.clipboardData.setData('text/plain', currentMailList);
         });

         //pega o ID do curso atual com base na URL
         sTemp = window.location.pathname.match(/\/courses\/(\d+)/);
         currentCourseID = sTemp[1];
         //console.log("ID do Curso: " + currentCourseID);

         //opcional: busca via API o nome do Curso atual
         $.getJSON('/api/v1/courses/' + currentCourseID, function (jsonCourse) {
            currentCourseName = jsonCourse.name;
            //console.log("Nome do Curso: " + currentCourseName);
         });

         //busca todos os grupos do curso atual via API
         $.getJSON(
            '/api/v1/courses/' + currentCourseID + '/groups?per_page=9999',
            function (jsonGroups) {
               //se existirem grupos:
               if (jsonGroups.length != 0) {
                  //lista cada item do JSON retornado pelo call a API
                  $('#hangoutDivs').append(
                     '<div class="item-group-condensed"><div class="ig-header"><h2 class="ig-header-title"><a class="element_toggler accessible-toggler" href="#" aria-label="Conferências Hangout">Conferências Hangout</a></h2>',
                  );
                  $.each(jsonGroups, function (index, value) {
                     var currentGroup = index;
                     //busca os usuários de cada grupos
                     $.getJSON(
                        '/api/v1/groups/' + value.id + '/users?include[]=avatar_url&per_page=9999',
                        function (json) {
                           //add o box principal da listagem de grupos
                           //adiciona o nome do grupo
                           $('#hangoutDivs').append(
                              '</div><div class="item-group-condensed"><div class="item-group-expandable"><div style="padding:10px" id="hangout-conference-list' +
                                 currentGroup +
                                 '"></div></div></div>',
                           );
                           $('#hangout-conference-list' + currentGroup + '').append(
                              '<div style="font-size:20px;" class="ig-header-title"><b>Grupo: ' +
                                 value.name +
                                 '</b></br></br></div>',
                           );
                           //console.log("GRUPO: " + value.name);
                           $.each(json, function (index, value) {
                              //adiciona os usuários
                              $currentUserID = value.id;
                              $currentUserAvatarURL = value.avatar_url;
                              $currentUserName = value.name;
                              $currentUserEmail = value.login_id;
                              //$currentUserAvatar = '<img src="' + $currentUserAvatarURL + '" width="64px" height="64px" onerror="imgError(this);">'
                              //$currentUserAvatar = '<div style="width:80px; height:80px; background-image: url(' + $currentUserAvatarURL + ');"></div>'
                              $userInfoCard =
                                 '<div style="align:middle; border-radius: 3px; box-shadow: 0px 0px 10px #ccc; margin: 5px; padding: 5px;"><div class="grid-row"><div class="col-xs-12 col-lg-6"><div class="ic-image-text-combo"><div class="ic-avatar"><img src="' +
                                 $currentUserAvatarURL +
                                 '" alt="' +
                                 $currentUserName +
                                 '" /></div><div class="ic-image-text-combo__text"><a href="/users/' +
                                 $currentUserID +
                                 '"><b>' +
                                 $currentUserName +
                                 '</b></a></br><i class="icon-email"></i> ' +
                                 $currentUserEmail +
                                 '</div></div></div></div>';
                              //$userInfoCard='<div style="align:middle; border-radius: 3px; box-shadow: 0px 0px 10px #ccc; margin: 5px; padding: 5px;">'+$currentUserAvatar+'<a href="users/'+$currentUserID+'"> '+$currentUserName+' </a></td><td>    '+$currentUserEmail+'</div>'

                              //$('#userInfoTable' + currentGroup + '').append($userInfoCard);

                              $('#hangout-conference-list' + currentGroup + '').append(
                                 $userInfoCard,
                              );
                              //$('#hangout-conference-list' + currentGroup + '').append('<ul>' + $currentUserAvatar + value.name + ' - ' + value.login_id + '</ul>');
                              if (index != json.length - 1) {
                                 mailList += value.login_id + ', ';
                                 inviteList +=
                                    "{ id : '" + value.login_id + "', invite_type : 'EMAIL' },";
                              } else {
                                 //quando for o último iten do array
                                 inviteList +=
                                    "{ id : '" + value.login_id + "', invite_type : 'EMAIL' }";
                                 mailList += value.login_id;

                                 function copyToClipboard(element) {
                                    alert(element);
                                    var $temp = $('<input>');
                                    $('body').append($temp);
                                    $temp.val(element).select();
                                    document.execCommand('copy');
                                    $temp.remove();
                                 }

                                 //console.log("-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_");
                                 //console.log(inviteList)
                                 //$('#hangout-conference-list' + currentGroup + '').append('<p><g:hangout render="createhangout" invites="[' + inviteList + ']"></g:hangout></p>');
                                 $('#hangout-conference-list' + currentGroup + '').append(
                                    '<button class="btn" id="btn_copyMailList_' +
                                       currentGroup +
                                       '"><i class="icon-email"></i>Copiar Email dos Participantes</button>',
                                 );
                                 $('#hangout-conference-list' + currentGroup + '').append(
                                    '<div id="maiiList' + currentGroup + '"></div>',
                                 );

                                 //copia a lista de emails do grupo para a área de transferência
                                 $('#maiiList' + currentGroup + '').hide();
                                 $('#maiiList' + currentGroup + '').text(mailList);
                                 $('#btn_copyMailList_' + currentGroup + '').click(function () {
                                    var $temp = $('<input>');
                                    $('body').append($temp);
                                    currentMailList = $('#maiiList' + currentGroup + '').text();
                                    //console.log($('#maiiList' + currentGroup + '').html());
                                    $temp.val($('#maiiList' + currentGroup + '').text()).select();
                                    document.execCommand('copy');
                                    $temp.remove();
                                    //copyToClipboard(mailList);
                                    //alert(currentMailList);
                                 });
                                 inviteList = '';
                                 //console.log('Quantidade de usuários no Grupo:' +json.length);
                                 mailList = '';
                              }
                           });
                        },
                     );
                  });

                  //var hangoutJS = document.createElement("script");
                  //hangoutJS.type = "text/javascript";
                  //hangoutJS.src = "https://apis.google.com/js/platform.js";
                  //$("head").append(hangoutJS);

                  //se não existirem grupos no curso atual:
               } else {
                  //console.log("no groups for the " + currentCourseName + "course");
               }
            },
         );
      }
   }
});